<!DOCTYPE html>
<!-- saved from url=(0400)https://disqus.com/embed/comments/?base=default&f=dfederm&t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&s_o=default#version=ffd5abc747f4e829755c5fb02e9b588f -->
<html lang="en" dir="ltr" class="js no-touch localstorage sessionstorage contenteditable use-opacity-transitions embed-refresh embed-refresh-v2" style="--publisher-color: rgb(25,215,32); --publisher-color-safe: rgb(25,215,32);"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Disqus Comments</title>

    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <style>
        .alert--warning {
            border-radius: 3px;
            padding: 10px 15px;
            margin-bottom: 10px;
            background-color: #FFE070;
            color: #A47703;
        }

        .alert--warning a,
        .alert--warning a:hover,
        .alert--warning strong {
            color: #A47703;
            font-weight: bold;
        }

        .alert--error p,
        .alert--warning p {
            margin-top: 5px;
            margin-bottom: 5px;
        }
        
        </style>
    
    <style>
        
        html {
            overflow: hidden;
        }
        

        #error {
            display: none;
        }

        .clearfix:after {
            content: "";
            display: block;
            height: 0;
            clear: both;
            visibility: hidden;
        }

        
    </style>

<script src="./cb=gapi.loaded_0" async=""></script><script src="./sdk.js" async="" crossorigin="anonymous"></script><script crossorigin="anonymous" id="bootstrap-script" data-app="lounge" src="./lounge.load.ffd5abc747f4e829755c5fb02e9b588f.js"></script><meta http-equiv="Content-Security-Policy" content="script-src https:;"><link rel="stylesheet" href="./lounge.72f05dc27e007c48ba81ee73c524d4ed.css"><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="lounge/main" src="./lounge.bundle.bdc23570c4aa54f61b1eae8c7a293f21.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="remote/config" src="./config.js"></script><style id="css_1713306584671"></style><!--<base target="_parent">--><base href="." target="_parent"><style type="text/css">@import url("https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,600;0,700;1,400;1,700&display=swap"); body.roboto , body.roboto input, body.roboto select, body.roboto textarea { font-family: Roboto, sans-serif; }</style><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="fb" src="./sdk(1).js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="gapi" src="./api.js" gapi_processed="true"></script><style type="text/css" data-fbcssmodules="css:fb.css.base css:fb.css.dialog css:fb.css.iframewidget css:fb.css.customer_chat_plugin_iframe">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:'lucida grande', tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}@keyframes fb_transform{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.fb_animate{animation:fb_transform .3s forwards}
.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:'lucida grande', tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}@keyframes fb_transform{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.fb_animate{animation:fb_transform .3s forwards}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_dialog_advanced{border-radius:8px;padding:10px}.fb_dialog_content{background:#fff;color:#373737}.fb_dialog_close_icon{background:url(https://connect.facebook.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{left:5px;right:auto;top:5px}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(https://connect.facebook.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent}.fb_dialog_close_icon:active{background:url(https://connect.facebook.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #365899;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(https://connect.facebook.net/rsrc.php/v3/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{height:100%;left:0;margin:0;overflow:visible;position:absolute;top:-10000px;transform:none;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(https://connect.facebook.net/rsrc.php/v3/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{background:none;height:auto;min-height:initial;min-width:initial;width:auto}.fb_dialog.fb_dialog_mobile.loading.centered #fb_dialog_loader_spinner{width:100%}.fb_dialog.fb_dialog_mobile.loading.centered .fb_dialog_content{background:none}.loading.centered #fb_dialog_loader_close{clear:both;color:#fff;display:block;font-size:18px;padding-top:20px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .4);bottom:0;left:0;min-height:100%;position:absolute;right:0;top:0;width:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_mobile .fb_dialog_iframe{position:sticky;top:0}.fb_dialog_content .dialog_header{background:linear-gradient(from(#738aba), to(#2c4987));border-bottom:1px solid;border-color:#043b87;box-shadow:white 0 1px 1px -1px inset;color:#fff;font:bold 14px Helvetica, sans-serif;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:linear-gradient(from(#4267B2), to(#2a4887));background-clip:padding-box;border:1px solid #29487d;border-radius:3px;display:inline-block;line-height:18px;margin-top:3px;max-width:85px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{background:none;border:none;color:#fff;font:bold 12px Helvetica, sans-serif;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(https://connect.facebook.net/rsrc.php/v3/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #4a4a4a;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f5f6f7;border:1px solid #4a4a4a;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}#fb_dialog_loader_spinner{animation:rotateSpinner 1.2s linear infinite;background-color:transparent;background-image:url(https://connect.facebook.net/rsrc.php/v3/yD/r/t-wz8gw1xG1.png);background-position:50% 50%;background-repeat:no-repeat;height:24px;width:24px}@keyframes rotateSpinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}
.fb_mpn_mobile_landing_page_slide_out{animation-duration:200ms;animation-name:fb_mpn_landing_page_slide_out;transition-timing-function:ease-in}.fb_mpn_mobile_landing_page_slide_out_from_left{animation-duration:200ms;animation-name:fb_mpn_landing_page_slide_out_from_left;transition-timing-function:ease-in}.fb_mpn_mobile_landing_page_slide_up{animation-duration:500ms;animation-name:fb_mpn_landing_page_slide_up;transition-timing-function:ease-in}.fb_mpn_mobile_bounce_in{animation-duration:300ms;animation-name:fb_mpn_bounce_in;transition-timing-function:ease-in}.fb_mpn_mobile_bounce_out{animation-duration:300ms;animation-name:fb_mpn_bounce_out;transition-timing-function:ease-in}.fb_mpn_mobile_bounce_out_v2{animation-duration:300ms;animation-name:fb_mpn_fade_out;transition-timing-function:ease-in}.fb_customer_chat_bounce_in_v2{animation-duration:300ms;animation-name:fb_bounce_in_v2;transition-timing-function:ease-in}.fb_customer_chat_bounce_in_from_left{animation-duration:300ms;animation-name:fb_bounce_in_from_left;transition-timing-function:ease-in}.fb_customer_chat_bounce_out_v2{animation-duration:300ms;animation-name:fb_bounce_out_v2;transition-timing-function:ease-in}.fb_customer_chat_bounce_out_from_left{animation-duration:300ms;animation-name:fb_bounce_out_from_left;transition-timing-function:ease-in}.fb_invisible_flow{display:inherit;height:0;overflow-x:hidden;width:0}@keyframes fb_mpn_landing_page_slide_out{0%{margin:0 12px;width:100% - 24px}60%{border-radius:18px}100%{border-radius:50%;margin:0 24px;width:60px}}@keyframes fb_mpn_landing_page_slide_out_from_left{0%{left:12px;width:100% - 24px}60%{border-radius:18px}100%{border-radius:50%;left:12px;width:60px}}@keyframes fb_mpn_landing_page_slide_up{0%{bottom:0;opacity:0}100%{bottom:24px;opacity:1}}@keyframes fb_mpn_bounce_in{0%{opacity:.5;top:100%}100%{opacity:1;top:0}}@keyframes fb_mpn_fade_out{0%{bottom:30px;opacity:1}100%{bottom:0;opacity:0}}@keyframes fb_mpn_bounce_out{0%{opacity:1;top:0}100%{opacity:.5;top:100%}}@keyframes fb_bounce_in_v2{0%{opacity:0;transform:scale(0, 0);transform-origin:bottom right}50%{transform:scale(1.03, 1.03);transform-origin:bottom right}100%{opacity:1;transform:scale(1, 1);transform-origin:bottom right}}@keyframes fb_bounce_in_from_left{0%{opacity:0;transform:scale(0, 0);transform-origin:bottom left}50%{transform:scale(1.03, 1.03);transform-origin:bottom left}100%{opacity:1;transform:scale(1, 1);transform-origin:bottom left}}@keyframes fb_bounce_out_v2{0%{opacity:1;transform:scale(1, 1);transform-origin:bottom right}100%{opacity:0;transform:scale(0, 0);transform-origin:bottom right}}@keyframes fb_bounce_out_from_left{0%{opacity:1;transform:scale(1, 1);transform-origin:bottom left}100%{opacity:0;transform:scale(0, 0);transform-origin:bottom left}}@keyframes slideInFromBottom{0%{opacity:.1;transform:translateY(100%)}100%{opacity:1;transform:translateY(0)}}@keyframes slideInFromBottomDelay{0%{opacity:0;transform:translateY(100%)}97%{opacity:0;transform:translateY(100%)}100%{opacity:1;transform:translateY(0)}}</style></head>
<body class="roboto dark light-anchor">
    

    
    <div id="error" class="alert--error">
        <p>We were unable to load Disqus. If you are a moderator please see our <a href="https://docs.disqus.com/help/83/"> troubleshooting guide</a>. </p>
    </div>

    
    <script type="text/json" id="disqus-forumData">{"session":{"canModerate":false,"audienceSyncVerified":false,"canReply":true,"mustVerify":false,"recaptchaPublicKey":"6Lfx6u0SAAAAAI1QkeTW397iQv1MsBfbDaYlwxK_","mustVerifyEmail":false},"forum":{"aetBannerConfirmation":null,"founder":"344699099","twitterName":null,"commentsLinkOne":"1 Comment","guidelines":null,"favicon":{"permalink":"https://disqus.com/api/forums/favicons/dfederm.jpg","cache":"//a.disquscdn.com/1712162125/images/favicon-default.png"},"commentsLinkZero":"0 Comments","disableDisqusBranding":false,"id":"dfederm","createdAt":"2020-02-11T22:01:25.819578","category":"Tech","aetBannerEnabled":false,"aetBannerTitle":null,"raw_guidelines":null,"initialCommentCount":null,"votingType":0,"daysUnapproveNewUsers":null,"installCompleted":true,"moderatorBadgeText":"","commentPolicyText":null,"aetEnabled":false,"channel":null,"sort":4,"description":null,"newPolicy":true,"raw_description":null,"customFont":null,"language":"en","adsReviewStatus":0,"commentsPlaceholderTextEmpty":null,"daysAlive":0,"forumCategory":{"date_added":"2016-01-28T01:54:31","id":8,"name":"Tech"},"linkColor":null,"colorScheme":"dark","pk":"5985501","commentsPlaceholderTextPopulated":null,"permissions":{},"commentPolicyLink":null,"aetBannerDescription":null,"name":"dfederm","commentsLinkMultiple":"{num} Comments","settings":{"threadRatingsEnabled":false,"adsDRNativeEnabled":false,"behindClickEnabled":false,"disable3rdPartyTrackers":true,"adsVideoEnabled":false,"adsProductVideoEnabled":false,"adsPositionTopEnabled":false,"ssoRequired":false,"unapproveLinks":true,"adsPositionRecommendationsEnabled":false,"linkAffiliationEnabled":true,"adsProductLinksThumbnailsEnabled":false,"hasCustomAvatar":false,"organicDiscoveryEnabled":false,"adsProductDisplayEnabled":false,"adsProductLinksEnabled":false,"audienceSyncEnabled":false,"threadReactionsEnabled":false,"adsEnabled":false,"disableSocialShare":false,"allowAnonPost":true,"adsProductStoriesEnabled":false,"sidebarEnabled":false,"adultContent":false,"allowAnonVotes":false,"gifPickerEnabled":true,"mustVerify":true,"badgesEnabled":false,"mustVerifyEmail":true,"unapproveNewUsersEnabled":false,"mediaembedEnabled":true,"userIdentityDisabled":false,"adsPositionBottomEnabled":false,"discoveryLocked":false,"validateAllPosts":false,"adsSettingsLocked":false,"isVIP":false,"adsPositionInthreadEnabled":false},"organizationId":4443687,"typeface":"sans-serif","url":"https://dfederm.com/","daysThreadAlive":0,"avatar":{"small":{"permalink":"https://disqus.com/api/forums/avatars/dfederm.jpg?size=32","cache":"//a.disquscdn.com/1712162125/images/noavatar32.png"},"large":{"permalink":"https://disqus.com/api/forums/avatars/dfederm.jpg?size=92","cache":"//a.disquscdn.com/1712162125/images/noavatar92.png"}},"signedUrl":"https://disq.us/?url=https%3A%2F%2Fdfederm.com%2F&key=jjkeR7TQotAYPdO7Eo0HBg"}}</script>

    <script type="text/json" id="disqus-threadData">{"cursor":{"hasPrev":false,"prev":null,"total":42,"hasNext":false,"next":"1:0:0"},"code":0,"response":{"lastModified":1710782250,"posts":[{"editableUntil":"2021-03-18T02:25:58","dislikes":0,"thread":"8176273142","numReports":0,"likes":4,"message":"\u003cp>This was a lifesaver. Could not find much of it in the Microsoft docs.\u003c/p>","id":"5299410010","createdAt":"2021-03-11T03:25:58","author":{"username":"disqus_Ktk4rEPCif","about":"","name":"Rich Ellis","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2017-10-28T13:28:25","profileUrl":"https://disqus.com/by/disqus_Ktk4rEPCif/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"269505691","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_Ktk4rEPCif.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_Ktk4rEPCif.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar128.png"},"cache":"//a.disquscdn.com/1712162125/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_Ktk4rEPCif.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_Ktk4rEPCif.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"This was a lifesaver. Could not find much of it in the Microsoft docs.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":0,"points":4,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2023-03-05T21:35:15","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>What if I need to run everything from Generic Host in the background (services which are used elsewhere in my solution), but I need a separate console app which accepts console input. In other words I would like a normal console application with user input/app output which have access to all services in Generic Host?\u003c/p>","id":"6124931568","createdAt":"2023-02-26T21:35:15","author":{"username":"rodinlive","about":"","name":"Andrey Rodin","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2023-02-26T21:32:45","profileUrl":"https://disqus.com/by/rodinlive/","url":"https://rodin.live","location":"London, United Kingdom","isPrivate":false,"signedUrl":"https://disq.us/?url=https%3A%2F%2Frodin.live&key=N5vkYKF-rKK5JA1sJihjkQ","isPrimary":true,"isAnonymous":false,"id":"392495971","avatar":{"permalink":"https://disqus.com/api/users/avatars/rodinlive.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/rodinlive.jpg","cache":"https://c.disquscdn.com/uploads/users/39249/5971/avatar200.jpg?1677447394"},"cache":"https://c.disquscdn.com/uploads/users/39249/5971/avatar92.jpg?1677447394","large":{"permalink":"https://disqus.com/api/users/avatars/rodinlive.jpg","cache":"https://c.disquscdn.com/uploads/users/39249/5971/avatar92.jpg?1677447394"},"small":{"permalink":"https://disqus.com/api/users/avatars/rodinlive.jpg","cache":"https://c.disquscdn.com/uploads/users/39249/5971/avatar32.jpg?1677447394"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"What if I need to run everything from Generic Host in the background (services which are used elsewhere in my solution), but I need a separate console app which accepts console input. In other words I would like a normal console application with user input/app output which have access to all services in Generic Host?","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":0,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2022-09-30T10:08:48","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>Hi, I found your blog trough a intensive google search.\u003c/p>\u003cp>Following Problem:\u003cbr>I am an experienced .net-Framework dev and have my issues understanding the new service Architecture.\u003c/p>\u003cp>I usually builded my services in company that I can start them as .Console-App for debugging purpose but being able to be installed as service\u003c/p>\u003cp>Just like this mini garbage project of mine \u003ca href=\"https://disq.us/url?url=https%3A%2F%2Fbitbucket.org%2Fda-legendary-Michi%2Flegendary_repository%2Fsrc%2Fmaster%2FPriorityForcer%2F%3AVtiN5ZN84zY3665NGlBoabnlCgE&amp;cuid=5985501\" rel=\"nofollow noopener\" title=\"https://bitbucket.org/da-legendary-Michi/legendary_repository/src/master/PriorityForcer/\">https://bitbucket.org/da-le...\u003c/a>\u003c/p>\u003cp>If I understand your article rights its to build an .exe which hosts a service, (maybe I understand it wrong) which hosts a service.\u003c/p>\u003cp>Do you have an Idea how I can write like in good old times an App which can work as Console-App or/and as service with same codebase and same deployment?\u003c/p>\u003cp>Best Regards,\u003cbr>Michael Fleischer\u003c/p>","id":"5993822737","createdAt":"2022-09-23T10:08:48","author":{"username":"michaelvonfleisch","about":"","name":"Michael von Fleisch","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2022-09-23T10:04:55","profileUrl":"https://disqus.com/by/michaelvonfleisch/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"388078082","avatar":{"permalink":"https://disqus.com/api/users/avatars/michaelvonfleisch.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/michaelvonfleisch.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar128.png"},"cache":"//a.disquscdn.com/1712162125/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/michaelvonfleisch.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/michaelvonfleisch.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Hi, I found your blog trough a intensive google search.\n\nFollowing Problem:\nI am an experienced .net-Framework dev and have my issues understanding the new service Architecture.\n\nI usually builded my services in company that I can start them as .Console-App for debugging purpose but being able to be installed as service\n\nJust like this mini garbage project of mine https://bitbucket.org/da-legendary-Michi/legendary_repository/src/master/PriorityForcer/\n\nIf I understand your article rights its to build an .exe which hosts a service, (maybe I understand it wrong) which hosts a service.\n\nDo you have an Idea how I can write like in good old times an App which can work as Console-App or/and as service with same codebase and same deployment?\n\nBest Regards,\nMichael Fleischer","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":0,"points":0,"moderationLabels":["links"],"isEdited":false,"sb":false},{"editableUntil":"2022-10-01T14:32:51","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>You may be interested in .NET Worker Services: \u003ca href=\"https://disq.us/url?url=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fdotnet%2Fcore%2Fextensions%2Fworkers%3A7deMsutdWzN7yTYe4vtY7MdQLU8&amp;cuid=5985501\" rel=\"nofollow noopener\" title=\"https://learn.microsoft.com/en-us/dotnet/core/extensions/workers\">https://learn.microsoft.com...\u003c/a>\u003c/p>","id":"5994839986","createdAt":"2022-09-24T14:32:51","author":{"username":"dfederm","about":"","name":"David Federman","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2020-02-12T03:00:50","profileUrl":"https://disqus.com/by/dfederm/","url":"https://dfederm.com","location":"","isPrivate":false,"signedUrl":"https://disq.us/?url=https%3A%2F%2Fdfederm.com&key=EadxwfpHc98SYpwNw-RUXQ","isPrimary":true,"isAnonymous":false,"id":"344699099","avatar":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar200.jpg?1664029972"},"cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar92.jpg?1664029972","large":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar92.jpg?1664029972"},"small":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar32.jpg?1664029972"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5993822737,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"You may be interested in .NET Worker Services: https://learn.microsoft.com/en-us/dotnet/core/extensions/workers","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":1,"points":0,"moderationLabels":["links"],"isEdited":true,"sb":false},{"editableUntil":"2022-10-02T14:25:25","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>thanks for the answer, so just replace the .net framework start stop thing with that and I will still be able to install software as console app/or and as service?\u003c/p>","id":"5995569277","createdAt":"2022-09-25T14:25:25","author":{"username":"michaelvonfleisch","about":"","name":"Michael von Fleisch","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2022-09-23T10:04:55","profileUrl":"https://disqus.com/by/michaelvonfleisch/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"388078082","avatar":{"permalink":"https://disqus.com/api/users/avatars/michaelvonfleisch.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/michaelvonfleisch.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar128.png"},"cache":"//a.disquscdn.com/1712162125/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/michaelvonfleisch.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/michaelvonfleisch.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5994839986,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"thanks for the answer, so just replace the .net framework start stop thing with that and I will still be able to install software as console app/or and as service?","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":2,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2022-07-19T22:34:10","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>There's some stuff here which is really hard to follow. I'll start with a simple question.\u003cbr>Why is StartAsync (ostensibly an async method) run synchronously?\u003c/p>","id":"5915315953","createdAt":"2022-07-12T22:34:10","author":{"username":"disqus_AEOCNc6J5w","about":"","name":"Some Coder","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2022-05-17T23:29:44","profileUrl":"https://disqus.com/by/disqus_AEOCNc6J5w/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"384477820","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_AEOCNc6J5w.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_AEOCNc6J5w.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar128.png"},"cache":"//a.disquscdn.com/1712162125/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_AEOCNc6J5w.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_AEOCNc6J5w.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"There's some stuff here which is really hard to follow. I'll start with a simple question.\nWhy is StartAsync (ostensibly an async method) run synchronously?","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":0,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2022-07-19T22:53:00","dislikes":0,"thread":"8176273142","numReports":0,"likes":1,"message":"\u003cp>`StartAsync` needs to return for the application to actually finish \"starting\". It's async to allow some async initialization, but if you put the entire application's logic in `StartAsync`, then it'll always be \"starting\" and never \"started\".\u003c/p>","id":"5915330154","createdAt":"2022-07-12T22:53:00","author":{"username":"dfederm","about":"","name":"David Federman","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2020-02-12T03:00:50","profileUrl":"https://disqus.com/by/dfederm/","url":"https://dfederm.com","location":"","isPrivate":false,"signedUrl":"https://disq.us/?url=https%3A%2F%2Fdfederm.com&key=EadxwfpHc98SYpwNw-RUXQ","isPrimary":true,"isAnonymous":false,"id":"344699099","avatar":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar200.jpg?1664029972"},"cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar92.jpg?1664029972","large":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar92.jpg?1664029972"},"small":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar32.jpg?1664029972"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5915315953,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"`StartAsync` needs to return for the application to actually finish \"starting\". It's async to allow some async initialization, but if you put the entire application's logic in `StartAsync`, then it'll always be \"starting\" and never \"started\".","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":1,"points":1,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2022-07-20T01:33:22","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>OK. I think I understand that. It'll return quickly if it is synchronous and you can use Task.Run to kick off the application logic (in the registered callback of the _applicationLifetime). Thank you.\u003c/p>","id":"5915442152","createdAt":"2022-07-13T01:33:22","author":{"username":"disqus_AEOCNc6J5w","about":"","name":"Some Coder","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2022-05-17T23:29:44","profileUrl":"https://disqus.com/by/disqus_AEOCNc6J5w/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"384477820","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_AEOCNc6J5w.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_AEOCNc6J5w.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar128.png"},"cache":"//a.disquscdn.com/1712162125/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_AEOCNc6J5w.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_AEOCNc6J5w.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5915330154,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"OK. I think I understand that. It'll return quickly if it is synchronous and you can use Task.Run to kick off the application logic (in the registered callback of the _applicationLifetime). Thank you.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":2,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2022-02-18T04:12:58","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>Hi David,\u003c/p>\u003cp>Great post!\u003c/p>\u003cp>I took the liberty of forking your GitHub repo and added some extra features that I plan on using in future console apps.\u003c/p>\u003cp>I would love any feedback from you (or anyone on here). :)\u003c/p>\u003cp>\u003ca href=\"https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Fegarcia74%2FGenericHostConsoleApp%3AplWAQyB3_8T8a3eS9j5puZb0krc&amp;cuid=5985501\" rel=\"nofollow noopener\" title=\"https://github.com/egarcia74/GenericHostConsoleApp\">egarcia74/GenericHostConsoleApp\u003c/a>\u003c/p>\u003cp>* Separating the main application logic from the boilerplate startup code. There is now a separate MainService class, which can be easily modified to implement custom logic without having to worry about all the application plumbing required to wire up the application hosted service.\u003c/p>\u003cp>* Moved classes into subdirectories corresponding to the class' area of concern. E.g. Configuration, Services, Interfaces.\u003c/p>\u003cp>* Using an ExitCode enum to define return values.\u003c/p>\u003cp>* Compile-time logging source generation .\u003c/p>\u003cp>* Validation of configuration options .\u003c/p>\u003cp>* Serilog as the logging provider.\u003c/p>","id":"5729789487","createdAt":"2022-02-11T04:12:58","author":{"username":"eduardogarciaprieto","about":"Coffee + Music = Eargasms!!!!","name":"Eduardo Garcia-Prieto","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-03-18T07:16:13","profileUrl":"https://disqus.com/by/eduardogarciaprieto/","url":"","location":"Brisbane, Australia","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"99210343","avatar":{"permalink":"https://disqus.com/api/users/avatars/eduardogarciaprieto.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/eduardogarciaprieto.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar128.png"},"cache":"//a.disquscdn.com/1712162125/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/eduardogarciaprieto.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/eduardogarciaprieto.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Hi David,\n\nGreat post!\n\nI took the liberty of forking your GitHub repo and added some extra features that I plan on using in future console apps.\n\nI would love any feedback from you (or anyone on here). :)\n\n\u003ca href=\"https://github.com/egarcia74/GenericHostConsoleApp\">egarcia74/GenericHostConsoleApp\u003c/a>\n\n* Separating the main application logic from the boilerplate startup code. There is now a separate MainService class, which can be easily modified to implement custom logic without having to worry about all the application plumbing required to wire up the application hosted service.\n\n* Moved classes into subdirectories corresponding to the class' area of concern. E.g. Configuration, Services, Interfaces.\n\n* Using an ExitCode enum to define return values.\n\n* Compile-time logging source generation .\n\n* Validation of configuration options .\n\n* Serilog as the logging provider.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":0,"points":0,"moderationLabels":["links"],"isEdited":false,"sb":false},{"editableUntil":"2022-07-29T03:28:44","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>Some great code in there. But there is a problem. If you add a second service, you will sometimes get a TaskCanceledException. I cloned your repo, duplicated your \u003cb>ApplicationHostedService\u003c/b> (named it something else) and on my first run I got that exception. Been getting that exception in my experiments with this as well. I think there's something wrong with the token handling in the code.\u003c/p>","id":"5925051107","createdAt":"2022-07-22T03:28:44","author":{"username":"disqus_mNBXR6Bjtz","about":"","name":"Dave Jones","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2022-04-27T03:23:36","profileUrl":"https://disqus.com/by/disqus_mNBXR6Bjtz/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"383906031","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_mNBXR6Bjtz.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_mNBXR6Bjtz.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar128.png"},"cache":"//a.disquscdn.com/1712162125/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_mNBXR6Bjtz.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_mNBXR6Bjtz.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5729789487,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Some great code in there. But there is a problem. If you add a second service, you will sometimes get a TaskCanceledException. I cloned your repo, duplicated your \u003cb>ApplicationHostedService\u003c/b> (named it something else) and on my first run I got that exception. Been getting that exception in my experiments with this as well. I think there's something wrong with the token handling in the code.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":1,"points":0,"moderationLabels":[],"isEdited":true,"sb":false},{"editableUntil":"2022-07-29T03:45:29","dislikes":0,"thread":"8176273142","numReports":0,"likes":3,"message":"\u003cp>Can you share a repro?\u003c/p>\u003cp>I suspect it's related to the StopApplication call in the finally block. When that service is done it would tear down the entire application. Multiple services would need to coordinate on that.\u003c/p>","id":"5925059488","createdAt":"2022-07-22T03:45:29","author":{"username":"dfederm","about":"","name":"David Federman","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2020-02-12T03:00:50","profileUrl":"https://disqus.com/by/dfederm/","url":"https://dfederm.com","location":"","isPrivate":false,"signedUrl":"https://disq.us/?url=https%3A%2F%2Fdfederm.com&key=EadxwfpHc98SYpwNw-RUXQ","isPrimary":true,"isAnonymous":false,"id":"344699099","avatar":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar200.jpg?1664029972"},"cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar92.jpg?1664029972","large":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar92.jpg?1664029972"},"small":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar32.jpg?1664029972"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5925051107,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Can you share a repro?\n\nI suspect it's related to the StopApplication call in the finally block. When that service is done it would tear down the entire application. Multiple services would need to coordinate on that.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":2,"points":3,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2022-07-29T03:57:08","dislikes":0,"thread":"8176273142","numReports":0,"likes":1,"message":"\u003cp>I think that's correct. The ApplicationHostedService will tear down the process after the MainService.Main method completes.\u003c/p>","id":"5925065050","createdAt":"2022-07-22T03:57:08","author":{"username":"eduardogarciaprieto","about":"Coffee + Music = Eargasms!!!!","name":"Eduardo Garcia-Prieto","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-03-18T07:16:13","profileUrl":"https://disqus.com/by/eduardogarciaprieto/","url":"","location":"Brisbane, Australia","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"99210343","avatar":{"permalink":"https://disqus.com/api/users/avatars/eduardogarciaprieto.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/eduardogarciaprieto.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar128.png"},"cache":"//a.disquscdn.com/1712162125/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/eduardogarciaprieto.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/eduardogarciaprieto.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5925059488,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"I think that's correct. The ApplicationHostedService will tear down the process after the MainService.Main method completes.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":3,"points":1,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2022-07-30T01:32:26","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>I have forked your repo and added a 2nd service. That \u003ca href=\"https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Fdavejonescodes%2FGenericHostConsoleApp.git%3A9n9Mu__8NAW-biiIEb2hBASRtt8&amp;cuid=5985501\" rel=\"nofollow noopener\" title=\"https://github.com/davejonescodes/GenericHostConsoleApp.git\">fork is here\u003c/a>. I've put a small delay in the \"Other\" service to demonstrate. The only solution I can think of, in the absence of some kind of tricky orchestration, is to ensure that the slowest service calls StopApplication. But it will have to be ensured to be the slowest and is not really an optimum solution. The thing I don't get is that when you call IsCancellationRequested in the other service, it returns false! I guess that can't be updated across hosted services, despite the linked token source. Cheers.\u003c/p>","id":"5925963701","createdAt":"2022-07-23T01:32:26","author":{"username":"disqus_mNBXR6Bjtz","about":"","name":"Dave Jones","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2022-04-27T03:23:36","profileUrl":"https://disqus.com/by/disqus_mNBXR6Bjtz/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"383906031","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_mNBXR6Bjtz.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_mNBXR6Bjtz.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar128.png"},"cache":"//a.disquscdn.com/1712162125/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_mNBXR6Bjtz.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_mNBXR6Bjtz.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5925059488,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"I have forked your repo and added a 2nd service. That \u003ca href=\"https://github.com/davejonescodes/GenericHostConsoleApp.git\">fork is here\u003c/a>. I've put a small delay in the \"Other\" service to demonstrate. The only solution I can think of, in the absence of some kind of tricky orchestration, is to ensure that the slowest service calls StopApplication. But it will have to be ensured to be the slowest and is not really an optimum solution. The thing I don't get is that when you call IsCancellationRequested in the other service, it returns false! I guess that can't be updated across hosted services, despite the linked token source. Cheers.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":3,"points":0,"moderationLabels":["links"],"isEdited":false,"sb":false},{"editableUntil":"2022-07-29T06:54:55","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>I believe that is exactly right. I'll put together a sample when I get back to a PC. Not sure how to stop the host other than StopApplication and the HostApplicationLifetime abstraction does not really help, despite being a singleton.\u003c/p>","id":"5925139256","createdAt":"2022-07-22T06:54:55","author":{"username":"disqus_mNBXR6Bjtz","about":"","name":"Dave Jones","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2022-04-27T03:23:36","profileUrl":"https://disqus.com/by/disqus_mNBXR6Bjtz/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"383906031","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_mNBXR6Bjtz.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_mNBXR6Bjtz.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar128.png"},"cache":"//a.disquscdn.com/1712162125/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_mNBXR6Bjtz.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_mNBXR6Bjtz.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5925059488,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"I believe that is exactly right. I'll put together a sample when I get back to a PC. Not sure how to stop the host other than StopApplication and the HostApplicationLifetime abstraction does not really help, despite being a singleton.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":3,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2021-10-22T18:22:25","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>Thanks David. This was so helpful !!!\u003c/p>\u003cp>I cannot comprehend that Microsoft does not have an example as clear as this. If they do, it is well buried on their site and it should be promoted as one of their top documentation.\u003c/p>\u003cp>In any case (and with all due respect), I think you have one small bug in your app. You should store the Task object returned by Task.Run when you register your application and await that task in StopAsync.\u003c/p>\u003cp>At least, in my case, I was getting a problem on shutdown about the CancellationToken. I figured it had to do with my background task and as soon as I started awaiting for that Task obejct, my application was now shutting down perfectly and cleanly.\u003c/p>\u003cp>Let me know if this makes sense. It is also possible that there is a subtle detail that I missed from your example.\u003c/p>","id":"5572329790","createdAt":"2021-10-15T18:22:25","author":{"username":"jeanfrancoiscloutier","about":"","name":"Jean-Francois Cloutier","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2018-08-03T13:34:17","profileUrl":"https://disqus.com/by/jeanfrancoiscloutier/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"293671840","avatar":{"permalink":"https://disqus.com/api/users/avatars/jeanfrancoiscloutier.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/jeanfrancoiscloutier.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar128.png"},"cache":"//a.disquscdn.com/1712162125/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/jeanfrancoiscloutier.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/jeanfrancoiscloutier.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Thanks David. This was so helpful !!!\n\nI cannot comprehend that Microsoft does not have an example as clear as this. If they do, it is well buried on their site and it should be promoted as one of their top documentation.\n\nIn any case (and with all due respect), I think you have one small bug in your app. You should store the Task object returned by Task.Run when you register your application and await that task in StopAsync.\n\nAt least, in my case, I was getting a problem on shutdown about the CancellationToken. I figured it had to do with my background task and as soon as I started awaiting for that Task obejct, my application was now shutting down perfectly and cleanly.\n\nLet me know if this makes sense. It is also possible that there is a subtle detail that I missed from your example.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":0,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2023-10-27T14:19:48","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>You could add to your try catch  so you catch and swallow the cancelled exception before you unhandled exception.\u003c/p>\u003cp>so\u003c/p>\u003cp>catch when (applicationLifeTime.ApplicationStopping.IsCancellationRequested) {\u003cbr>  // ignore the error\u003cbr>} catch (Exception ex) {\u003cbr>...\u003c/p>","id":"6304700644","createdAt":"2023-10-20T14:19:48","author":{"username":"bobvale","about":"","name":"Bob","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2013-06-03T12:43:37","profileUrl":"https://disqus.com/by/bobvale/","url":"","location":"","isPrivate":true,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"54313832","avatar":{"permalink":"https://disqus.com/api/users/avatars/bobvale.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/bobvale.jpg","cache":"https://c.disquscdn.com/uploads/users/5431/3832/avatar200.jpg?1697811589"},"cache":"https://c.disquscdn.com/uploads/users/5431/3832/avatar92.jpg?1697811589","large":{"permalink":"https://disqus.com/api/users/avatars/bobvale.jpg","cache":"https://c.disquscdn.com/uploads/users/5431/3832/avatar92.jpg?1697811589"},"small":{"permalink":"https://disqus.com/api/users/avatars/bobvale.jpg","cache":"https://c.disquscdn.com/uploads/users/5431/3832/avatar32.jpg?1697811589"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5572329790,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"You could add to your try catch  so you catch and swallow the cancelled exception before you unhandled exception.\n\nso \n\ncatch when (applicationLifeTime.ApplicationStopping.IsCancellationRequested) {\n  // ignore the error\n} catch (Exception ex) {\n...","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":1,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2021-12-28T17:04:48","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>I know this is a super late reply, but I think you're right. I'll correct the code in the GitHub repo.\u003c/p>\u003cp>It's actually a little more involved and requires you to maintain your own cancellation token source to cancel your application logic properly.\u003c/p>","id":"5653711278","createdAt":"2021-12-21T17:04:48","author":{"username":"dfederm","about":"","name":"David Federman","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2020-02-12T03:00:50","profileUrl":"https://disqus.com/by/dfederm/","url":"https://dfederm.com","location":"","isPrivate":false,"signedUrl":"https://disq.us/?url=https%3A%2F%2Fdfederm.com&key=EadxwfpHc98SYpwNw-RUXQ","isPrimary":true,"isAnonymous":false,"id":"344699099","avatar":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar200.jpg?1664029972"},"cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar92.jpg?1664029972","large":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar92.jpg?1664029972"},"small":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar32.jpg?1664029972"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5572329790,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"I know this is a super late reply, but I think you're right. I'll correct the code in the GitHub repo.\n\nIt's actually a little more involved and requires you to maintain your own cancellation token source to cancel your application logic properly.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":1,"points":0,"moderationLabels":[],"isEdited":true,"sb":false},{"editableUntil":"2022-07-28T09:42:44","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>I have been experimenting with this and the Github code does not seem to work where a 2nd hosted service is included. I'm getting a TaskCanceledException. It is always thrown by the slower service (experimented with Task.Delay).\u003c/p>\u003cp>However, if you do not call cancellationTokenSource.Cancel(), it all works as expected. Cancelling in the ApplicationStopping event causes the problem.\u003c/p>","id":"5924181224","createdAt":"2022-07-21T09:42:44","author":{"username":"disqus_mNBXR6Bjtz","about":"","name":"Dave Jones","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2022-04-27T03:23:36","profileUrl":"https://disqus.com/by/disqus_mNBXR6Bjtz/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"383906031","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_mNBXR6Bjtz.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_mNBXR6Bjtz.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar128.png"},"cache":"//a.disquscdn.com/1712162125/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_mNBXR6Bjtz.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_mNBXR6Bjtz.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5653711278,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"I have been experimenting with this and the Github code does not seem to work where a 2nd hosted service is included. I'm getting a TaskCanceledException. It is always thrown by the slower service (experimented with Task.Delay).\n\nHowever, if you do not call cancellationTokenSource.Cancel(), it all works as expected. Cancelling in the ApplicationStopping event causes the problem.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":2,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2022-07-28T21:54:54","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>Pretty sure this happens because Task.Delay throws an exception when a Task is cancelled. The code is prevaricated on the notion that the async operation you call does NOT throw an exception. If it does, your would need to change the code to handle that (I think).\u003c/p>","id":"5924829219","createdAt":"2022-07-21T21:54:54","author":{"username":"disqus_AEOCNc6J5w","about":"","name":"Some Coder","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2022-05-17T23:29:44","profileUrl":"https://disqus.com/by/disqus_AEOCNc6J5w/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"384477820","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_AEOCNc6J5w.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_AEOCNc6J5w.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar128.png"},"cache":"//a.disquscdn.com/1712162125/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_AEOCNc6J5w.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_AEOCNc6J5w.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5924181224,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Pretty sure this happens because Task.Delay throws an exception when a Task is cancelled. The code is prevaricated on the notion that the async operation you call does NOT throw an exception. If it does, your would need to change the code to handle that (I think).","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":3,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2022-07-29T01:10:32","dislikes":0,"thread":"8176273142","numReports":0,"likes":1,"message":"\u003cp>I tested your theory and it still does not work. So, I replaced my call to Task.Delay with a service that checks for cancelation and returns without an exception. It does not work. There does not seem to be a way of signalling cancelation from one hosted service to another. The linked CancellationTokenSource may do that within one hosted service, but it does not achieve it across two hosted services. \u003cbr>Something is missing here.\u003c/p>","id":"5924963263","createdAt":"2022-07-22T01:10:32","author":{"username":"disqus_mNBXR6Bjtz","about":"","name":"Dave Jones","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2022-04-27T03:23:36","profileUrl":"https://disqus.com/by/disqus_mNBXR6Bjtz/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"383906031","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_mNBXR6Bjtz.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_mNBXR6Bjtz.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar128.png"},"cache":"//a.disquscdn.com/1712162125/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_mNBXR6Bjtz.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_mNBXR6Bjtz.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5924829219,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"I tested your theory and it still does not work. So, I replaced my call to Task.Delay with a service that checks for cancelation and returns without an exception. It does not work. There does not seem to be a way of signalling cancelation from one hosted service to another. The linked CancellationTokenSource may do that within one hosted service, but it does not achieve it across two hosted services. \nSomething is missing here.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":4,"points":1,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2021-09-14T07:41:14","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>Thanks David for this very useful post. Why did you need to register the task in startasync to IApplicationLiffetime CancellationToken called applicationstarted? I didn't do this I just called the task directly in background so  StartAsync returns immediately and all works well. Can you explain the difference thanks\u003c/p>","id":"5525049807","createdAt":"2021-09-07T07:41:14","author":{"username":"nicolasbarlatier","about":"","name":"NB","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2018-02-02T16:50:24","profileUrl":"https://disqus.com/by/nicolasbarlatier/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"278971148","avatar":{"permalink":"https://disqus.com/api/users/avatars/nicolasbarlatier.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/nicolasbarlatier.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar128.png"},"cache":"//a.disquscdn.com/1712162125/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/nicolasbarlatier.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/nicolasbarlatier.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Thanks David for this very useful post. Why did you need to register the task in startasync to IApplicationLiffetime CancellationToken called applicationstarted? I didn't do this I just called the task directly in background so  StartAsync returns immediately and all works well. Can you explain the difference thanks","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":0,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2021-09-14T21:04:02","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>The differences are subtle but approximately the same. In my example, the actual \"service\" startup (your logic) happens once the application is started, ie after any internal stuff the generic host does. If you kick off that logic in a task immediately, then the generic host's application startup happens concurrently with your logic, so the application isn't \"started\" yet (from the host's perspective). I can't think of any specific issues your approach would cause, but my example follows the application lifetime events of the host.\u003c/p>","id":"5525828639","createdAt":"2021-09-07T21:04:02","author":{"username":"dfederm","about":"","name":"David Federman","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2020-02-12T03:00:50","profileUrl":"https://disqus.com/by/dfederm/","url":"https://dfederm.com","location":"","isPrivate":false,"signedUrl":"https://disq.us/?url=https%3A%2F%2Fdfederm.com&key=EadxwfpHc98SYpwNw-RUXQ","isPrimary":true,"isAnonymous":false,"id":"344699099","avatar":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar200.jpg?1664029972"},"cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar92.jpg?1664029972","large":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar92.jpg?1664029972"},"small":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar32.jpg?1664029972"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5525049807,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"The differences are subtle but approximately the same. In my example, the actual \"service\" startup (your logic) happens once the application is started, ie after any internal stuff the generic host does. If you kick off that logic in a task immediately, then the generic host's application startup happens concurrently with your logic, so the application isn't \"started\" yet (from the host's perspective). I can't think of any specific issues your approach would cause, but my example follows the application lifetime events of the host.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":1,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2021-09-15T07:26:29","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>Thanks David for your explanation which could be included to explain the code content :)\u003c/p>\u003cp>Do you have links showing samples where application lifetime events are handled from IHostedService\u003c/p>\u003cp>I found this one for example\u003cbr>\u003ca href=\"https://disq.us/url?url=https%3A%2F%2Fvoidnish.wordpress.com%2F2018%2F07%2F21%2Fhandling-application-lifetime-events-for-a-hosted-service%2F%3AOKFEu_6lY9p1veozmvvc4mfd1xU&amp;cuid=5985501\" rel=\"nofollow noopener\" title=\"https://voidnish.wordpress.com/2018/07/21/handling-application-lifetime-events-for-a-hosted-service/\">https://voidnish.wordpress.com/2018/07/21/handling-application-lifetime-events-for-a-hosted-service/\u003c/a>\u003c/p>\u003cp>Here what I did, in my case I needed to close down the application once the process is done so _hosttApplicationLifeTime.StopApplication(); is called\u003c/p>\u003cp>\u003ccode>\u003cbr>public Task StartAsync(CancellationToken cancellationToken)\u003cbr>        {\u003cbr>            try\u003cbr>            {\u003cbr>\u003cbr>                Task.Run(async () =&gt;\u003cbr>                {\u003cbr>                    try\u003cbr>                    {\u003cbr>                        await ProcessAsync(cancellationToken);\u003cbr>\u003cbr>                    }\u003cbr>                    catch (Exception ex)\u003cbr>                    {\u003cbr>                        _logger.LogError(ex, \"Unhandled exception!\");\u003cbr>                    }\u003cbr>                    finally\u003cbr>                    {\u003cbr>                        //--&gt; ask for the application to close down\u003cbr>                        _hosttApplicationLifeTime.StopApplication();\u003cbr>                    }\u003cbr>                });\u003cbr>\u003cbr>\u003cbr>                return Task.CompletedTask;\u003cbr>            }\u003cbr>            catch (Exception)\u003cbr>            {\u003cbr>\u003cbr>                throw;\u003cbr>            }\u003cbr>\u003cbr>        }\u003cbr>\u003c/code>\u003c/p>\u003cp>You are from Seattle ? I watch Frasier lately ;)\u003c/p>\u003cp>Cheers\u003c/p>","id":"5526279419","createdAt":"2021-09-08T07:26:29","author":{"username":"nicolasbarlatier","about":"","name":"NB","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2018-02-02T16:50:24","profileUrl":"https://disqus.com/by/nicolasbarlatier/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"278971148","avatar":{"permalink":"https://disqus.com/api/users/avatars/nicolasbarlatier.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/nicolasbarlatier.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar128.png"},"cache":"//a.disquscdn.com/1712162125/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/nicolasbarlatier.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/nicolasbarlatier.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5525828639,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Thanks David for your explanation which could be included to explain the code content :) \n\nDo you have links showing samples where application lifetime events are handled from IHostedService\n\nI found this one for example\n\u003ca href=\"https://voidnish.wordpress.com/2018/07/21/handling-application-lifetime-events-for-a-hosted-service/\">https://voidnish.wordpress.com/2018/07/21/handling-application-lifetime-events-for-a-hosted-service/\u003c/a>\n\nHere what I did, in my case I needed to close down the application once the process is done so _hosttApplicationLifeTime.StopApplication(); is called\n\n\u003ccode>\npublic Task StartAsync(CancellationToken cancellationToken)\n        {\n            try\n            {\n\n                Task.Run(async () =>\n                {\n                    try\n                    {\n                        await ProcessAsync(cancellationToken);\n\n                    }\n                    catch (Exception ex)\n                    {\n                        _logger.LogError(ex, \"Unhandled exception!\");\n                    }\n                    finally\n                    {\n                        //--> ask for the application to close down\n                        _hosttApplicationLifeTime.StopApplication();\n                    }\n                });\n\n\n                return Task.CompletedTask;\n            }\n            catch (Exception)\n            {\n\n                throw;\n            }\n\n        }\n\u003c/code>\n\nYou are from Seattle ? I watch Frasier lately ;)\n\nCheers","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":2,"points":0,"moderationLabels":["links"],"isEdited":true,"sb":false},{"editableUntil":"2021-09-08T21:51:32","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>Program.cs Line 17 says to add 3rd Party Loggers but those require info like a Token that you would store in app.config.  Can you get Configuration at that point?  Should ConfigureLogging() be moved below ConfigureServices()?\u003c/p>","id":"5518491998","createdAt":"2021-09-01T21:51:32","author":{"username":"michael_wasson","about":"","name":"Michael Wasson","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-01-21T13:53:26","profileUrl":"https://disqus.com/by/michael_wasson/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"91559849","avatar":{"permalink":"https://disqus.com/api/users/avatars/michael_wasson.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/michael_wasson.jpg","cache":"https://c.disquscdn.com/uploads/users/9155/9849/avatar200.jpg?1630533093"},"cache":"https://c.disquscdn.com/uploads/users/9155/9849/avatar92.jpg?1630533093","large":{"permalink":"https://disqus.com/api/users/avatars/michael_wasson.jpg","cache":"https://c.disquscdn.com/uploads/users/9155/9849/avatar92.jpg?1630533093"},"small":{"permalink":"https://disqus.com/api/users/avatars/michael_wasson.jpg","cache":"https://c.disquscdn.com/uploads/users/9155/9849/avatar32.jpg?1630533093"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Program.cs Line 17 says to add 3rd Party Loggers but those require info like a Token that you would store in app.config.  Can you get Configuration at that point?  Should ConfigureLogging() be moved below ConfigureServices()?","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":0,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2021-09-09T05:08:54","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>For NLog, I usually just do something like (apologies for bad formatting):\u003cbr>\u003ccode>\u003cbr>hostBuilder.ConfigureLogging((hostingContext, loggingBuilder) =&gt;\u003cbr>            {\u003cbr>                // configure Logging with NLog\u003cbr>                loggingBuilder.ClearProviders();\u003cbr>                loggingBuilder.AddConfiguration(hostingContext.Configuration.GetSection(\"Logging\"));\u003cbr>                loggingBuilder.AddNLog(GetLoggingConfiguration());\u003cbr>            });\u003cbr>\u003c/code>\u003c/p>","id":"5518844783","createdAt":"2021-09-02T05:08:54","author":{"username":"dfederm","about":"","name":"David Federman","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2020-02-12T03:00:50","profileUrl":"https://disqus.com/by/dfederm/","url":"https://dfederm.com","location":"","isPrivate":false,"signedUrl":"https://disq.us/?url=https%3A%2F%2Fdfederm.com&key=EadxwfpHc98SYpwNw-RUXQ","isPrimary":true,"isAnonymous":false,"id":"344699099","avatar":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar200.jpg?1664029972"},"cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar92.jpg?1664029972","large":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar92.jpg?1664029972"},"small":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar32.jpg?1664029972"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5518491998,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"For NLog, I usually just do something like (apologies for bad formatting):\n\u003ccode>\nhostBuilder.ConfigureLogging((hostingContext, loggingBuilder) =>\n            {\n                // configure Logging with NLog\n                loggingBuilder.ClearProviders();\n                loggingBuilder.AddConfiguration(hostingContext.Configuration.GetSection(\"Logging\"));\n                loggingBuilder.AddNLog(GetLoggingConfiguration());\n            });\n\u003c/code>","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":1,"points":0,"moderationLabels":[],"isEdited":true,"sb":false},{"editableUntil":"2021-07-05T17:06:11","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>(Sorry, formatting in Disqus is not very nice.)\u003c/p>","id":"5436348747","createdAt":"2021-06-28T17:06:11","author":{"username":"disqus_Sf20jH0Mbs","about":"","name":"Glen","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2012-10-01T04:46:40","profileUrl":"https://disqus.com/by/disqus_Sf20jH0Mbs/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"33348778","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_Sf20jH0Mbs.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_Sf20jH0Mbs.jpg","cache":"https://c.disquscdn.com/uploads/users/3334/8778/avatar200.jpg?1676561416"},"cache":"https://c.disquscdn.com/uploads/users/3334/8778/avatar92.jpg?1676561416","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_Sf20jH0Mbs.jpg","cache":"https://c.disquscdn.com/uploads/users/3334/8778/avatar92.jpg?1676561416"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_Sf20jH0Mbs.jpg","cache":"https://c.disquscdn.com/uploads/users/3334/8778/avatar32.jpg?1676561416"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"(Sorry, formatting in Disqus is not very nice.)","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":0,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2021-07-05T17:05:35","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>This seems to be working for me.\u003c/p>\u003cp>\u003ccode>\u003cbr>using Microsoft.Extensions.Configuration;\u003cbr>using Microsoft.Extensions.DependencyInjection;\u003cbr>using Microsoft.Extensions.Hosting;\u003cbr>using MyApp.MainCode;\u003cbr>\u003cbr>namespace MyApp\u003cbr>{\u003cbr>  class Program\u003cbr>  {\u003cbr>    static void Main(string[] args)\u003cbr>    {\u003cbr>      var host = Host.CreateDefaultBuilder()\u003cbr>        .ConfigureAppConfiguration(app =&gt;\u003cbr>        {\u003cbr>          app.AddJsonFile(\"appsettings.json\");\u003cbr>        })\u003cbr>        .ConfigureServices(services =&gt;\u003cbr>        {\u003cbr>          services.AddSingleton(services);\u003cbr>          services.AddSingleton&lt;mainapplication&gt;();\u003cbr>        })\u003cbr>        .Build();\u003cbr>\u003cbr>      var mainApp = host.Services.GetService&lt;mainapplication&gt;();\u003cbr>      mainApp.Start();\u003cbr>    }\u003cbr>  }\u003cbr>}\u003cbr>\u003c/code>\u003c/p>\u003cp>and in MainApplication:\u003c/p>\u003cp>\u003ccode>\u003cbr> internal class MainApplication\u003cbr>  {\u003cbr>    private ILogger&lt;mainapplication&gt; Logger { get; }\u003cbr>    public IServiceCollection Services { get; }\u003cbr>\u003cbr>    public MainApplication(ILogger&lt;mainapplication&gt; logger, IServiceCollection services)\u003cbr>    {\u003cbr>      Logger = logger;\u003cbr>      Services = services;\u003cbr>    }\u003cbr>\u003cbr>    public void Start()\u003cbr>    {\u003cbr>        // do whatever\u003cbr>\u003cbr>       Services.AddSingleton&lt;myothercustomcode&gt;();\u003cbr>\u003cbr>       var serviceProvider = Services.BuildServiceProvider();\u003cbr>       var myOtherCustomCode = serviceProvider.GetService&lt;myothercustomcode&gt;();\u003cbr>\u003cbr>       myOtherCustomCode.RunRoutine1();\u003cbr>\u003cbr>    }\u003cbr>}\u003cbr>\u003c/code>\u003c/p>\u003cp>By adding \"services\" as a singleton, later, \"MyApplication\" can inject more services and get them via DI.\u003c/p>","id":"5436348039","createdAt":"2021-06-28T17:05:35","author":{"username":"disqus_Sf20jH0Mbs","about":"","name":"Glen","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2012-10-01T04:46:40","profileUrl":"https://disqus.com/by/disqus_Sf20jH0Mbs/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"33348778","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_Sf20jH0Mbs.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_Sf20jH0Mbs.jpg","cache":"https://c.disquscdn.com/uploads/users/3334/8778/avatar200.jpg?1676561416"},"cache":"https://c.disquscdn.com/uploads/users/3334/8778/avatar92.jpg?1676561416","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_Sf20jH0Mbs.jpg","cache":"https://c.disquscdn.com/uploads/users/3334/8778/avatar92.jpg?1676561416"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_Sf20jH0Mbs.jpg","cache":"https://c.disquscdn.com/uploads/users/3334/8778/avatar32.jpg?1676561416"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"This seems to be working for me. \n\n\u003ccode>\nusing Microsoft.Extensions.Configuration;\nusing Microsoft.Extensions.DependencyInjection;\nusing Microsoft.Extensions.Hosting;\nusing MyApp.MainCode;\n\nnamespace MyApp\n{\n  class Program\n  {\n    static void Main(string[] args)\n    {\n      var host = Host.CreateDefaultBuilder()\n        .ConfigureAppConfiguration(app =>\n        {\n          app.AddJsonFile(\"appsettings.json\");\n        })\n        .ConfigureServices(services =>\n        {\n          services.AddSingleton(services);\n          services.AddSingleton\u003cMainApplication>();\n        })\n        .Build();\n\n      var mainApp = host.Services.GetService\u003cMainApplication>();\n      mainApp.Start();\n    }\n  }\n}\n\u003c/code>\n\nand in MainApplication:\n\n\u003ccode>\n internal class MainApplication\n  {\n    private ILogger\u003cMainApplication> Logger { get; }\n    public IServiceCollection Services { get; }\n\n    public MainApplication(ILogger\u003cMainApplication> logger, IServiceCollection services)\n    {\n      Logger = logger;\n      Services = services;\n    }\n\n    public void Start()\n    {\n        // do whatever\n\n       Services.AddSingleton\u003cMyOtherCustomCode>();\n\n       var serviceProvider = Services.BuildServiceProvider();\n       var myOtherCustomCode = serviceProvider.GetService\u003cMyOtherCustomCode>();\n\n       myOtherCustomCode.RunRoutine1();\n\n    }\n}\n\u003c/code>\n\nBy adding \"services\" as a singleton, later, \"MyApplication\" can inject more services and get them via DI.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":0,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2021-07-05T18:44:23","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>Based on this, seems like you're missing the RunConsoleAsync call which is what sets up the Cyril+C handler. I think that's the issue you were facing?\u003c/p>\u003cp>I also don't think any of the lifetime events are set up in your case. You're more or less just using the Service collection directly and not actually using the host\u003c/p>","id":"5436477426","createdAt":"2021-06-28T18:44:23","author":{"username":"dfederm","about":"","name":"David Federman","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2020-02-12T03:00:50","profileUrl":"https://disqus.com/by/dfederm/","url":"https://dfederm.com","location":"","isPrivate":false,"signedUrl":"https://disq.us/?url=https%3A%2F%2Fdfederm.com&key=EadxwfpHc98SYpwNw-RUXQ","isPrimary":true,"isAnonymous":false,"id":"344699099","avatar":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar200.jpg?1664029972"},"cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar92.jpg?1664029972","large":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar92.jpg?1664029972"},"small":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar32.jpg?1664029972"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5436348039,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Based on this, seems like you're missing the RunConsoleAsync call which is what sets up the Cyril+C handler. I think that's the issue you were facing?\n\nI also don't think any of the lifetime events are set up in your case. You're more or less just using the Service collection directly and not actually using the host","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":1,"points":0,"moderationLabels":[],"isEdited":true,"sb":false},{"editableUntil":"2021-07-06T19:53:13","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>Yes, my goal is to simply have a working console app...  The Main routine is using the host to do configuration and DI.\u003c/p>","id":"5437899042","createdAt":"2021-06-29T19:53:13","author":{"username":"disqus_Sf20jH0Mbs","about":"","name":"Glen","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2012-10-01T04:46:40","profileUrl":"https://disqus.com/by/disqus_Sf20jH0Mbs/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"33348778","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_Sf20jH0Mbs.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_Sf20jH0Mbs.jpg","cache":"https://c.disquscdn.com/uploads/users/3334/8778/avatar200.jpg?1676561416"},"cache":"https://c.disquscdn.com/uploads/users/3334/8778/avatar92.jpg?1676561416","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_Sf20jH0Mbs.jpg","cache":"https://c.disquscdn.com/uploads/users/3334/8778/avatar92.jpg?1676561416"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_Sf20jH0Mbs.jpg","cache":"https://c.disquscdn.com/uploads/users/3334/8778/avatar32.jpg?1676561416"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5436477426,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Yes, my goal is to simply have a working console app...  The Main routine is using the host to do configuration and DI.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":2,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2021-07-02T19:36:48","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>Here's another approach: \u003ca href=\"https://disq.us/url?url=https%3A%2F%2Fwildermuth.com%2F2020%2F08%2F02%2FNET-Core-Console-Apps---A-Better-Way%3ANDbIqPwtoJZLgGOzNmDJpA6fuFk&amp;cuid=5985501\" rel=\"nofollow noopener\" title=\"https://wildermuth.com/2020/08/02/NET-Core-Console-Apps---A-Better-Way\">https://wildermuth.com/2020...\u003c/a>\u003c/p>","id":"5433185231","createdAt":"2021-06-25T19:36:48","author":{"username":"disqus_Sf20jH0Mbs","about":"","name":"Glen","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2012-10-01T04:46:40","profileUrl":"https://disqus.com/by/disqus_Sf20jH0Mbs/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"33348778","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_Sf20jH0Mbs.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_Sf20jH0Mbs.jpg","cache":"https://c.disquscdn.com/uploads/users/3334/8778/avatar200.jpg?1676561416"},"cache":"https://c.disquscdn.com/uploads/users/3334/8778/avatar92.jpg?1676561416","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_Sf20jH0Mbs.jpg","cache":"https://c.disquscdn.com/uploads/users/3334/8778/avatar92.jpg?1676561416"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_Sf20jH0Mbs.jpg","cache":"https://c.disquscdn.com/uploads/users/3334/8778/avatar32.jpg?1676561416"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Here's another approach: https://wildermuth.com/2020/08/02/NET-Core-Console-Apps---A-Better-Way","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":0,"points":0,"moderationLabels":["links"],"isEdited":false,"sb":false},{"editableUntil":"2021-07-02T19:28:54","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>With this approach, it looks like using Ctrl+C to stop the application does not work.  Here's what the log shows: \u003cbr>\u003c/p>\u003cblockquote>info: Microsoft.Hosting.Lifetime[0]\u003cbr>      Application is shutting down...\u003c/blockquote>\u003cp>\u003cbr>but the application continues.\u003c/p>","id":"5433176005","createdAt":"2021-06-25T19:28:54","author":{"username":"disqus_Sf20jH0Mbs","about":"","name":"Glen","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2012-10-01T04:46:40","profileUrl":"https://disqus.com/by/disqus_Sf20jH0Mbs/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"33348778","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_Sf20jH0Mbs.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_Sf20jH0Mbs.jpg","cache":"https://c.disquscdn.com/uploads/users/3334/8778/avatar200.jpg?1676561416"},"cache":"https://c.disquscdn.com/uploads/users/3334/8778/avatar92.jpg?1676561416","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_Sf20jH0Mbs.jpg","cache":"https://c.disquscdn.com/uploads/users/3334/8778/avatar92.jpg?1676561416"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_Sf20jH0Mbs.jpg","cache":"https://c.disquscdn.com/uploads/users/3334/8778/avatar32.jpg?1676561416"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"With this approach, it looks like using Ctrl+C to stop the application does not work.  Here's what the log shows: \n\u003cblockquote>info: Microsoft.Hosting.Lifetime[0]\n      Application is shutting down...\u003c/blockquote>\nbut the application continues.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":0,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2021-11-20T06:18:55","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>My guess is, you're probably in debug mode?\u003c/p>","id":"5606764124","createdAt":"2021-11-13T06:18:55","author":{"username":"the_menace","about":"","name":"Dennis Rongo","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2011-07-02T22:10:36","profileUrl":"https://disqus.com/by/the_menace/","url":"http://dennisrongo.com/","location":"","isPrivate":false,"signedUrl":"http://disq.us/?url=http%3A%2F%2Fdennisrongo.com%2F&key=-ZpAROvo7wsgNwgIAc-yVA","isPrimary":true,"isAnonymous":false,"id":"13390373","avatar":{"permalink":"https://disqus.com/api/users/avatars/the_menace.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/the_menace.jpg","cache":"https://c.disquscdn.com/uploads/users/1339/373/avatar200.jpg?1636784335"},"cache":"https://c.disquscdn.com/uploads/users/1339/373/avatar92.jpg?1636784335","large":{"permalink":"https://disqus.com/api/users/avatars/the_menace.jpg","cache":"https://c.disquscdn.com/uploads/users/1339/373/avatar92.jpg?1636784335"},"small":{"permalink":"https://disqus.com/api/users/avatars/the_menace.jpg","cache":"https://c.disquscdn.com/uploads/users/1339/373/avatar32.jpg?1636784335"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5433176005,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"My guess is, you're probably in debug mode?","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":1,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2021-07-03T19:43:14","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>Do you have a repro to share? It seems to work in the example code I used.\u003c/p>","id":"5434300395","createdAt":"2021-06-26T19:43:14","author":{"username":"dfederm","about":"","name":"David Federman","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2020-02-12T03:00:50","profileUrl":"https://disqus.com/by/dfederm/","url":"https://dfederm.com","location":"","isPrivate":false,"signedUrl":"https://disq.us/?url=https%3A%2F%2Fdfederm.com&key=EadxwfpHc98SYpwNw-RUXQ","isPrimary":true,"isAnonymous":false,"id":"344699099","avatar":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar200.jpg?1664029972"},"cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar92.jpg?1664029972","large":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar92.jpg?1664029972"},"small":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar32.jpg?1664029972"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5433176005,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Do you have a repro to share? It seems to work in the example code I used.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":1,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2021-03-31T09:56:33","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>This is an EXCELLENT post!\u003c/p>\u003cp>How would you tackle unit testing/integration testing, specifically how to test the components that are generated by the DI? I got the IServiceProvider reference after the run, but (obviously) all the objects are disposed when the application is completed.\u003c/p>\u003cp>Additionally/FYI in the context for unit testing, the Environment.GetCommandLineArgs() call doesn't work as expected (it returns the arguments that were passed into xUnit) - after a lot of browsing the best practice seems to be to set a custom/short lived environment variable, but that somewhat messes up the cleanliness of the code.\u003c/p>","id":"5315399547","createdAt":"2021-03-24T09:56:33","author":{"username":"woutervanranst","about":"","name":"Wouter Van Ranst","disable3rdPartyTrackers":true,"isPowerContributor":false,"joinedAt":"2021-03-24T09:53:14","profileUrl":"https://disqus.com/by/woutervanranst/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"366631126","avatar":{"permalink":"https://disqus.com/api/users/avatars/woutervanranst.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/woutervanranst.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar128.png"},"cache":"//a.disquscdn.com/1712162125/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/woutervanranst.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/woutervanranst.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"This is an EXCELLENT post!\n\nHow would you tackle unit testing/integration testing, specifically how to test the components that are generated by the DI? I got the IServiceProvider reference after the run, but (obviously) all the objects are disposed when the application is completed.\n\nAdditionally/FYI in the context for unit testing, the Environment.GetCommandLineArgs() call doesn't work as expected (it returns the arguments that were passed into xUnit) - after a lot of browsing the best practice seems to be to set a custom/short lived environment variable, but that somewhat messes up the cleanliness of the code.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":0,"points":0,"moderationLabels":[],"isEdited":true,"sb":false},{"editableUntil":"2021-04-01T05:19:11","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>For testing components which are creating by the DI container, I would just test them \"normally\". ie just \u003ccode>new\u003c/code> the object up and provide mock implementations for all dependencies (after all, these are *unit* tests).\u003c/p>\u003cp>Regarding the command line args, you could create a service like \u003ccode>IEnvironment\u003c/code> where the implementation uses \u003ccode>Environment.GetCommandLineArgs()\u003c/code>, Env vars, and whatever other statics which are part of the environment and hard to mock. That way in unit tests you can provide a MockEnvironment. Similarly you see people use this pattern and create an IClock which abstracts \u003ccode>DateTime.Now\u003c/code>.\u003c/p>","id":"5316529925","createdAt":"2021-03-25T05:19:11","author":{"username":"dfederm","about":"","name":"David Federman","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2020-02-12T03:00:50","profileUrl":"https://disqus.com/by/dfederm/","url":"https://dfederm.com","location":"","isPrivate":false,"signedUrl":"https://disq.us/?url=https%3A%2F%2Fdfederm.com&key=EadxwfpHc98SYpwNw-RUXQ","isPrimary":true,"isAnonymous":false,"id":"344699099","avatar":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar200.jpg?1664029972"},"cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar92.jpg?1664029972","large":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar92.jpg?1664029972"},"small":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar32.jpg?1664029972"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5315399547,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"For testing components which are creating by the DI container, I would just test them \"normally\". ie just \u003ccode>new\u003c/code> the object up and provide mock implementations for all dependencies (after all, these are *unit* tests).\n\nRegarding the command line args, you could create a service like \u003ccode>IEnvironment\u003c/code> where the implementation uses \u003ccode>Environment.GetCommandLineArgs()\u003c/code>, Env vars, and whatever other statics which are part of the environment and hard to mock. That way in unit tests you can provide a MockEnvironment. Similarly you see people use this pattern and create an IClock which abstracts \u003ccode>DateTime.Now\u003c/code>.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":1,"points":0,"moderationLabels":[],"isEdited":true,"sb":false},{"editableUntil":"2021-02-17T23:43:39","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>Great article.  And nice to stumble across one that is \"up to date\" rather than lots of examples of \"older\" versions of .NET Core async/DI/Configuration from the last 5 years. \u003cbr>I think I understand what you are saying in your reply to \u003ca data-dsq-mention=\"disqus_kqrhjqkqsv:disqus\" href=\"https://disqus.com/by/disqus_KqRhJqkqSv/\" rel=\"nofollow noopener\" title=\"https://disqus.com/by/disqus_KqRhJqkqSv/\">Oleksii Nikiforov\u003c/a> about using \u003ccode>_appLifetime.ApplicationStarted.Register\u003c/code> but why wrap the implementation code in an \u003ccode>Task.Run(async() =&gt; {})\u003c/code>?  Surely the actual program (\u003ccode>Task.Delay(1000)\u003c/code> or similar) can be awaited on directly within the Register() callback?\u003cbr>Thanks.\u003c/p>","id":"5263709355","createdAt":"2021-02-10T23:43:39","author":{"username":"disqus_FnjZUqcxmG","about":"","name":"Chris Walsh","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-03-24T12:50:04","profileUrl":"https://disqus.com/by/disqus_FnjZUqcxmG/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"100112558","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_FnjZUqcxmG.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_FnjZUqcxmG.jpg","cache":"https://c.disquscdn.com/uploads/users/10011/2558/avatar200.jpg?1650489690"},"cache":"https://c.disquscdn.com/uploads/users/10011/2558/avatar92.jpg?1650489690","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_FnjZUqcxmG.jpg","cache":"https://c.disquscdn.com/uploads/users/10011/2558/avatar92.jpg?1650489690"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_FnjZUqcxmG.jpg","cache":"https://c.disquscdn.com/uploads/users/10011/2558/avatar32.jpg?1650489690"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Great article.  And nice to stumble across one that is \"up to date\" rather than lots of examples of \"older\" versions of .NET Core async/DI/Configuration from the last 5 years. \nI think I understand what you are saying in your reply to @disqus_KqRhJqkqSv:disqus about using \u003ccode>_appLifetime.ApplicationStarted.Register\u003c/code> but why wrap the implementation code in an \u003ccode>Task.Run(async() => {})\u003c/code>?  Surely the actual program (\u003ccode>Task.Delay(1000)\u003c/code> or similar) can be awaited on directly within the Register() callback?\nThanks.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":0,"points":0,"moderationLabels":[],"isEdited":true,"sb":false},{"editableUntil":"2021-03-09T03:57:40","dislikes":0,"thread":"8176273142","numReports":0,"likes":1,"message":"\u003cp>I believe you want to wrap it in a \u003ccode>Task.Run\u003c/code> since it's in an event callback. Generally you don't want event callbacks to block for a long time (in this case the entire lifetime of the application basically), as events are dispatched sequentially. Imagine if there were multiple registrations to the event.\u003c/p>\u003cp>To be fair, I didn't test not wrapping it, so they very well may call these in a non-blocking way.\u003c/p>","id":"5288119643","createdAt":"2021-03-02T03:57:40","author":{"username":"dfederm","about":"","name":"David Federman","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2020-02-12T03:00:50","profileUrl":"https://disqus.com/by/dfederm/","url":"https://dfederm.com","location":"","isPrivate":false,"signedUrl":"https://disq.us/?url=https%3A%2F%2Fdfederm.com&key=EadxwfpHc98SYpwNw-RUXQ","isPrimary":true,"isAnonymous":false,"id":"344699099","avatar":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar200.jpg?1664029972"},"cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar92.jpg?1664029972","large":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar92.jpg?1664029972"},"small":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar32.jpg?1664029972"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5263709355,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"I believe you want to wrap it in a \u003ccode>Task.Run\u003c/code> since it's in an event callback. Generally you don't want event callbacks to block for a long time (in this case the entire lifetime of the application basically), as events are dispatched sequentially. Imagine if there were multiple registrations to the event.\n\nTo be fair, I didn't test not wrapping it, so they very well may call these in a non-blocking way.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":1,"points":1,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2022-02-11T02:14:18","dislikes":0,"thread":"8176273142","numReports":0,"likes":1,"message":"\u003cp>But if it is an event, isn't async-await created exactly to not block it, without introducing any additional threads? \ud83e\udd14\u003c/p>","id":"5721101184","createdAt":"2022-02-04T02:14:18","author":{"username":"disqus_LbRONCzCHR","about":"","name":"vkradio","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-10-06T06:58:34","profileUrl":"https://disqus.com/by/disqus_LbRONCzCHR/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"124590669","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_LbRONCzCHR.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_LbRONCzCHR.jpg","cache":"https://c.disquscdn.com/uploads/users/12459/669/avatar200.jpg?1643940859"},"cache":"https://c.disquscdn.com/uploads/users/12459/669/avatar92.jpg?1643940859","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_LbRONCzCHR.jpg","cache":"https://c.disquscdn.com/uploads/users/12459/669/avatar92.jpg?1643940859"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_LbRONCzCHR.jpg","cache":"https://c.disquscdn.com/uploads/users/12459/669/avatar32.jpg?1643940859"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5288119643,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"But if it is an event, isn't async-await created exactly to not block it, without introducing any additional threads? \ud83e\udd14","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":2,"points":1,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2022-02-11T16:00:58","dislikes":0,"thread":"8176273142","numReports":0,"likes":1,"message":"\u003cp>It's not the same thing as this `Task.Run` is *not* awaited, so it doesn't block at all. Also, keep in mind that we're not in an async context anyway at this point, we're in a synchronous lambda passed to `_appLifetime.ApplicationStarted.Register`.\u003c/p>","id":"5721660176","createdAt":"2022-02-04T16:00:58","author":{"username":"dfederm","about":"","name":"David Federman","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2020-02-12T03:00:50","profileUrl":"https://disqus.com/by/dfederm/","url":"https://dfederm.com","location":"","isPrivate":false,"signedUrl":"https://disq.us/?url=https%3A%2F%2Fdfederm.com&key=EadxwfpHc98SYpwNw-RUXQ","isPrimary":true,"isAnonymous":false,"id":"344699099","avatar":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar200.jpg?1664029972"},"cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar92.jpg?1664029972","large":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar92.jpg?1664029972"},"small":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar32.jpg?1664029972"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5721101184,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"It's not the same thing as this `Task.Run` is *not* awaited, so it doesn't block at all. Also, keep in mind that we're not in an async context anyway at this point, we're in a synchronous lambda passed to `_appLifetime.ApplicationStarted.Register`.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":3,"points":1,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2021-03-09T10:15:45","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>Thanks. Hadn't considered that.\u003c/p>","id":"5288310812","createdAt":"2021-03-02T10:15:45","author":{"username":"disqus_FnjZUqcxmG","about":"","name":"Chris Walsh","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-03-24T12:50:04","profileUrl":"https://disqus.com/by/disqus_FnjZUqcxmG/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"100112558","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_FnjZUqcxmG.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_FnjZUqcxmG.jpg","cache":"https://c.disquscdn.com/uploads/users/10011/2558/avatar200.jpg?1650489690"},"cache":"https://c.disquscdn.com/uploads/users/10011/2558/avatar92.jpg?1650489690","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_FnjZUqcxmG.jpg","cache":"https://c.disquscdn.com/uploads/users/10011/2558/avatar92.jpg?1650489690"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_FnjZUqcxmG.jpg","cache":"https://c.disquscdn.com/uploads/users/10011/2558/avatar32.jpg?1650489690"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5288119643,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Thanks. Hadn't considered that.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":2,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2020-09-01T18:07:06","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>Thanks for post. \u003cbr>Why do you need to invoke\u003cbr>\u003ccode>_appLifetime.ApplicationStarted.Register\u003c/code> rather than doing your code directly in \u003ci>StartAsync\u003c/i>. What is the benefit of doing that?\u003c/p>","id":"5044794109","createdAt":"2020-08-25T18:07:06","author":{"username":"disqus_KqRhJqkqSv","about":"","name":"Oleksii Nikiforov","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2019-06-07T15:15:42","profileUrl":"https://disqus.com/by/disqus_KqRhJqkqSv/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"333508088","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_KqRhJqkqSv.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_KqRhJqkqSv.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar128.png"},"cache":"//a.disquscdn.com/1712162125/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_KqRhJqkqSv.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_KqRhJqkqSv.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Thanks for post. \nWhy do you need to invoke\n\u003ccode>_appLifetime.ApplicationStarted.Register\u003c/code> rather than doing your code directly in \u003ci>StartAsync\u003c/i>. What is the benefit of doing that?","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":0,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2020-09-02T19:25:11","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>According to the docs, `IHostedService.StartAsync` is \"triggered when the application host is ready to start the service\", while `IApplicationLifetime.ApplicationStarted` is \"triggered when the application host has fully started and is about to wait for a graceful shutdown.\" The differences are subtle, and I suspect in practice you won't have much of an issue using either one. However, `IHostedService.StartAsync` is called when the host isn't completely started up yet, so I suspect there might be race conditions if your code finishes (and calls `StopApplication`) faster than the host finishing starting up.\u003c/p>","id":"5046328387","createdAt":"2020-08-26T19:25:11","author":{"username":"dfederm","about":"","name":"David Federman","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2020-02-12T03:00:50","profileUrl":"https://disqus.com/by/dfederm/","url":"https://dfederm.com","location":"","isPrivate":false,"signedUrl":"https://disq.us/?url=https%3A%2F%2Fdfederm.com&key=EadxwfpHc98SYpwNw-RUXQ","isPrimary":true,"isAnonymous":false,"id":"344699099","avatar":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar200.jpg?1664029972"},"cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar92.jpg?1664029972","large":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar92.jpg?1664029972"},"small":{"permalink":"https://disqus.com/api/users/avatars/dfederm.jpg","cache":"https://c.disquscdn.com/uploads/users/34469/9099/avatar32.jpg?1664029972"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5044794109,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"According to the docs, `IHostedService.StartAsync` is \"triggered when the application host is ready to start the service\", while `IApplicationLifetime.ApplicationStarted` is \"triggered when the application host has fully started and is about to wait for a graceful shutdown.\" The differences are subtle, and I suspect in practice you won't have much of an issue using either one. However, `IHostedService.StartAsync` is called when the host isn't completely started up yet, so I suspect there might be race conditions if your code finishes (and calls `StopApplication`) faster than the host finishing starting up.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":1,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2020-09-03T06:27:21","dislikes":0,"thread":"8176273142","numReports":0,"likes":0,"message":"\u003cp>Now I see, thanks.\u003c/p>","id":"5047006666","createdAt":"2020-08-27T06:27:21","author":{"username":"disqus_KqRhJqkqSv","about":"","name":"Oleksii Nikiforov","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2019-06-07T15:15:42","profileUrl":"https://disqus.com/by/disqus_KqRhJqkqSv/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"333508088","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_KqRhJqkqSv.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_KqRhJqkqSv.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar128.png"},"cache":"//a.disquscdn.com/1712162125/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_KqRhJqkqSv.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_KqRhJqkqSv.jpg","cache":"//a.disquscdn.com/1712162125/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5046328387,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Now I see, thanks.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"dfederm","depth":2,"points":0,"moderationLabels":[],"isEdited":false,"sb":false}],"thread":{"feed":"https://dfederm.disqus.com/building_a_console_app_with_net_generic_host/latest.rss","clean_title":"Building a Console App with .NET Generic Host","dislikes":0,"likes":7,"message":"","ratingsEnabled":false,"isSpam":false,"isDeleted":false,"category":"8202891","adsDisabled":false,"author":"344699099","id":"8176273142","signedLink":"https://disq.us/?url=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&key=aLOYaW_MivVbuGiuoAJ7WQ","createdAt":"2020-08-24T07:04:20","hasStreaming":false,"raw_message":"","isClosed":false,"link":"https://dfederm.com/building-a-console-app-with-.net-generic-host/","slug":"building_a_console_app_with_net_generic_host","forum":"dfederm","identifiers":["https://dfederm.com/building-a-console-app-with-.net-generic-host/"],"posts":42,"moderators":[344699099],"validateAllPosts":false,"title":"Building a Console App with .NET Generic Host","highlightedPost":null}},"order":"popular"}</script>


    <div id="fixed-content"></div>

    



    
        
            
<script type="text/json" id="disqus-urls">{
    "root":"//disqus.com",
    "next":"https://c.disquscdn.com/next/current"
}</script>

        
        
        <script>!function () {
            var d = document;
            var toH = d.head.appendChild.bind(d.head);

            var v = window.location.href.match(/[#&?]version=([0-9a-f]{32})/);
            var src = 'https://c.disquscdn.com/next/embed/lounge.load';
            if (v)
                src += '.' + v[1];
            src += '.js';

            var s = d.createElement('script');
            s.crossOrigin = 'anonymous';
            s.id = 'bootstrap-script';
            s.setAttribute('data-app', 'lounge');
            s.src = src;
            toH(s);

            var m = d.createElement('meta');
            m.setAttribute('http-equiv', 'Content-Security-Policy');
            m.setAttribute('content', "script-src https:;");
            toH(m);
        }();</script>
    


<script src="./common.bundle.a59842d31742a609955eb402e17bb0c3.js"></script><div id="layout" data-tracking-area="layout"><div id="thread__container"><div><div id="thread__wrapper"><div id="placement-top" data-tracking-area="discovery-north"></div><div id="onboard" data-tracking-area="onboard"><div></div></div><div id="reactions__container"></div><div id="ratings__container"></div><div id="badges-message__container"></div><div id="global-alert"></div><div id="tos__container"></div><header id="main-nav" data-tracking-area="main-nav"><div><nav class="nav nav-primary nav-primary--refresh"><ul><li class="nav-tab nav-tab--primary tab-conversation tab-conversation--refresh active" data-role="post-count"><a class="publisher-nav-color"><span class="comment-count">43 comments</span></a></li><li class="nav-tab nav-tab--primary tab-user"><ul><li class="nav-tab nav-tab--primary notification-menu unread" data-role="notification-menu" style="display: list-item;"><a href="https://disqus.com/home/inbox/" class="notification-container" data-action="home" data-home-path="home/notifications/"><span class="notification-icon notification-icon--refresh icon-comment" aria-hidden="true"></span><span class="notification-count notification-count--refresh" data-role="notification-count">1</span></a></li><li class="nav-tab nav-tab--primary dropdown user-menu" data-role="logout"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="dropdown-toggle dropdown-toggle--refresh" data-toggle="dropdown" role="menuitem" name="Login"><span class="dropdown-toggle-wrapper"><span class="username username--refresh">Login</span> </span> <span class="caret caret--refresh"></span></a><ul class="dropdown-menu dropdown-menu--refresh"><li><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="auth:disqus">Disqus</a></li><li><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="auth:facebook">Facebook</a></li><li><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="auth:twitter">X (Twitter)</a></li><li><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="auth:google">Google</a></li></ul></li></ul></li></ul></nav></div></header><section id="conversation" data-role="main" data-tracking-area="main"><div id="posts"><div id="form" class="textarea-outer-wrapper--top-level"><form class="reply form-refresh form-refresh-v2"><div class="postbox"><div role="alert"></div><div class="ratings-wrapper" data-role="ratings-container"></div><div class="compose-wrapper"><div class="avatar"><span class="user user--refresh"><div>G</div></span></div><div class="textarea-outer-wrapper textarea-outer-wrapper--refresh"><div class="textarea-wrapper" data-role="textarea" dir="auto"><div><span class="placeholder">Join the discussion</span><div class="textarea" tabindex="0" role="textbox" aria-multiline="true" contenteditable="PLAINTEXT-ONLY" data-role="editable" aria-label="Join the discussion" style="overflow: auto; overflow-wrap: break-word; max-height: 350px;"><p><br></p></div><div style="display: none;"><ul class="user-mention__list" id="user-mention-list"><li class="header user-mention__header"><h5>in this conversation</h5></li></ul></div></div><div data-role="drag-drop-placeholder" class="media-drag-hover" style="display: none;"><div class="drag-text"> Drag and drop your images here to upload them.</div></div><div class="media-preview empty" data-role="media-preview"><ul data-role="media-progress-list"></ul>
<ul data-role="media-rich-list"></ul>
<div class="media-expanded empty" data-role="media-preview-expanded">
<img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" data-role="media-preview-expanded-image" alt="Media preview placeholder">
</div>
</div><div class="edit-alert" role="postbox-alert"></div><div class="text-editor-container"><div class="post-actions"><div class="wysiwyg"><div class="gif-picker"><div class="wysiwyg__item" data-role="gif-picker-toggle" title="GIF" aria-label="Open GIF menu" tabindex="0"><div class="wysiwyg__gif" title="GIF" role="img"></div></div><div class="hidden gif-picker__popout-container" data-role="gif-picker-popout-container"></div><div class="new-feature-badge-star" title="New"><div class="wysiwyg__star-badge wysiwyg__star-badge-dims"></div></div></div><div class="media-uploader"><li class="wysiwyg__item" data-role="media-uploader" tabindex="-1"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="attach" class="attach" title="Upload Images" tabindex="0" aria-label="Open file attachment menu">
<div class="wysiwyg__attach wysiwyg__attach-dims" role="img"></div>
</a>
<input type="file" data-role="media-upload" tabindex="-1" accept="image/*">
</li></div><div class="vertical-separator"></div><div data-action="text-editor-buttons"><div class="wysiwyg__item" data-action="text-editor-tag" data-tag="b" tabindex="0" aria-label="Add bold tags to text editor"><div class="wysiwyg__bold" title="Bold" role="img"></div></div><div class="wysiwyg__item" data-action="text-editor-tag" data-tag="i" tabindex="0" aria-label="Add italics tags to text editor"><div class="wysiwyg__italic" title="Italic" role="img"></div></div><div class="wysiwyg__item" data-action="text-editor-tag" data-tag="u" tabindex="0" aria-label="Add underline tags to text editor"><div class="wysiwyg__underline" title="Underline" role="img"></div></div><div class="wysiwyg__item" data-action="text-editor-tag" data-tag="s" tabindex="0" aria-label="Add strikethrough tags to text editor"><div class="wysiwyg__strikethrough" title="Strikethrough" role="img"></div></div><div class="wysiwyg__item" data-action="text-editor-tag" data-tag="a" tabindex="0" aria-label="Add link tags to text editor"><div class="wysiwyg__link" title="Link" role="img"></div></div><div class="wysiwyg__item" data-action="text-editor-tag" data-tag="spoiler" tabindex="0" aria-label="Add spoiler tags to text editor"><div class="wysiwyg__spoiler" title="Spoiler" role="img"></div></div><div class="wysiwyg__item" data-action="text-editor-tag" data-tag="code" tabindex="0" aria-label="Add code tags to text editor"><div class="wysiwyg__code" title="Code" role="img"></div></div><div class="wysiwyg__item" data-action="text-editor-tag" data-tag="blockquote" tabindex="0" aria-label="Add block quote tags to text editor"><div class="wysiwyg__blockquote" title="Quote" role="img"></div></div></div></div><div class="logged-in"><section><div class="temp-post"><button type="submit" class="btn post-action__button full-size-button ">Comment</button><button type="submit" class="btn post-action__button small-size-button hidden">Comment</button></div></section></div></div></div></div></div></div><div data-role="login-form"><div><div><section class="auth-section logged-out__display"><div class="connect"><h6 class="connect__heading">Log in with</h6><ul data-role="login-menu" class="services login-buttons"><li class="auth-disqus"><button type="button" data-action="auth:disqus" title="Disqus" class="connect__button" aria-label="Login with Disqus"><i class="icon-disqus"></i></button></li><li class="auth-facebook"><button type="button" data-action="auth:facebook" title="Facebook" class="connect__button" aria-label="Login with Facebook"><i class="icon-facebook-circle"></i></button></li><li class="auth-twitter"><button type="button" data-action="auth:twitter" title="X (Twitter)" class="connect__button" aria-label="Login with X (Twitter)"><i class="icon-twitter-x"></i></button></li><li class="auth-google"><button type="button" data-action="auth:google" title="Google" class="connect__button" aria-label="Login with Google"><i class="icon-google-plus-circle"></i></button></li></ul></div><div class="guest guest--refresh"><div class="sign-up-wrapper-refresh"><h6 class="guest-form-title guest-form-title--refresh"><span class="register-text"> or sign up with Disqus </span><span class="guest-text"> or pick a name </span></h6> <button type="button" class="help-tooltip__wrapper help-icon" name="guest_tooltip" tabindex="0"><div id="rules" class="help-tooltip__container" data-role="guest-form-tooltip"><div class="tooltip show help-tooltip"><h3 class="help-tooltip__heading">Disqus is a discussion network</h3><ul class="help-tooltip__list"><li><span>Don't be a jerk or do anything illegal. Everything is easier that way.</span></li></ul><p class="clearfix"><a href="https://docs.disqus.com/kb/terms-and-policies/" class="btn btn-small help-tooltip__button" rel="noopener noreferrer" target="_blank">Read full terms and conditions</a></p></div></div></button></div><p class="input-wrapper"><input dir="auto" type="text" placeholder="Name" name="display_name" id="view87_display_name" maxlength="30" class="input--text" aria-label="name"></p><div class="guest-details " data-role="guest-details"><p class="input-wrapper"><input dir="auto" type="email" placeholder="Email" name="email" id="view87_email" class="input--text" aria-label="email"></p><p class="input-wrapper"><input dir="auto" disabled="" type="text" class="register-text input--text" placeholder="Password" name="password" aria-label="password" id="view87_password"></p><p><label><span>Please access our <a href="https://disqus.com/privacy-policy" target="_blank" rel="noopener noreferrer">Privacy Policy</a> to learn what personal data Disqus collects and your choices about how it is used.  All users of our service are also subject to our <a href="https://help.disqus.com/customer/portal/articles/466260-terms-of-service" target="_blank" rel="noopener noreferrer">Terms of Service</a>.</span></label></p><div class="guest-checkbox"><label><input type="checkbox" name="author-guest"> I'd rather post as a guest</label></div><div class="g-recaptcha" data-role="grecaptcha-container"></div><div class="proceed" data-role="submit-btn-container"><div><button type="submit" class="proceed__button btn submit" aria-label="Post"><span class="icon-proceed"></span><div class="spinner"></div></button><button type="submit" class="proceed__button btn next" aria-label="Next"><span class="icon-proceed"></span><div class="spinner"></div></button></div></div></div></div></section></div></div></div></div></form></div><div id="email-signup"></div><div id="secondary-navigation"><div data-tracking-area="secondary-nav" class="nav-secondary-refresh"><ul class="nav-secondary-refresh__list"><li class="nav-secondary-refresh__list-item"><div id="favorite-button"><div class="thread-likes"><div><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="favorite" title="Favorite this discussion" class="favorite-button-toggle favorite-button-toggle--v2 " aria-label="Favorite this discussion"><span class="label label-default"><span class="favorite-icon favorite-icon--refresh-v2 icon-heart-empty"></span></span><span class="label label-favorited"><span class="favorite-icon favorite-icon--refresh-v2 icon-heart"></span></span> <span class="label label-count-refresh label-count-refresh--v2">7</span></a><ul class="dropdown-menu dropdown-menu--coachmark pull-right"><li><div><h2 class="coachmark__heading">Discussion Favorited!</h2><p class="coachmark__description">Favoriting means this is a discussion worth sharing. It gets shared to your followers' Disqus feeds, and gives the creator kudos!</p></div> <a href="https://disqus.com/home/?utm_source=disqus_embed&amp;utm_content=recommend_btn" class="btn btn-primary coachmark__button" target="_blank" rel="noopener noreferrer">Find More Discussions</a></li></ul></div></div></div><div id="thread-share-bar" class="share-bar-refresh"><div class="thread-share-wrapper"><div class="round-delimiter"></div><span data-role="thread-share" class="thread-share-bar-buttons-refresh"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="share-button-toggle share-button-toggle--v2" data-toggle="dropdown" aria-label="Share">Share</a><ul class="share-dropdown-refresh"><li class="share-dropdown-refresh__item"><div class="share-icons-wrapper share-icons-wrapper--twitter" data-action="share:twitter"><span class="icon-twitter-x" aria-hidden="true"></span><span class="visually-hidden">Tweet this discussion</span></div></li><li class="share-dropdown-refresh__item"><div class="share-icons-wrapper share-icons-wrapper--facebook" data-action="share:facebook"><span class="icon-facebook" aria-hidden="true"></span><span class="visually-hidden">Share this discussion on Facebook</span></div></li><li class="share-dropdown-refresh__item"><div class="share-icons-wrapper share-icons-wrapper--email" data-action="share:email"><span class="icon-mail" aria-hidden="true"></span><span class="visually-hidden">Share this discussion via email</span></div></li><li class="share-dropdown-refresh__item"><div class="share-icons-wrapper share-icons-wrapper--link" data-action="copy-link" title="Click to copy discussion link"><span class="icon-link" aria-hidden="true"></span><span class="visually-hidden">Copy link to discussion</span></div></li></ul></span></div></div></li><li data-role="post-sort" class=""><ul class="sort-menu-refresh"><li class="sort-menu-refresh__item "><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="sort" data-sort="popular">Best</a></li><li class="sort-menu-refresh__item "><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="sort" data-sort="desc">Newest</a></li><li class="sort-menu-refresh__item selected"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="sort" data-sort="asc">Oldest</a></li></ul></li></ul></div></div><div id="no-posts" style="display: none;"></div><div id="highlighted-post" data-tracking-area="highlighted" class="highlighted-post" style="display: none;"></div><button class="alert alert--realtime alert--realtime--refresh alert--realtime--refresh-v2" data-role="realtime-notification" style="display: none;"></button><ul id="post-list" class="post-list"><li class="post" id="post-5044794109"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5044794109"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_KqRhJqkqSv/" data-action="profile" data-tab="" data-username="disqus_KqRhJqkqSv" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>O</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_KqRhJqkqSv/" data-action="profile" data-tab="" data-username="disqus_KqRhJqkqSv" target="_blank" rel="noopener noreferrer">Oleksii Nikiforov</a></span> <a data-action="follow" data-user="333508088" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5044794109" data-role="relative-time" class="time-ago" title="Tuesday, August 25, 2020 2:07 PM">4 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Thanks for post. <br>Why do you need to invoke<br><code>_appLifetime.ApplicationStarted.Register</code> rather than doing your code directly in <i>StartAsync</i>. What is the benefit of doing that?</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5044794109" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2bfjg1p" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5044794109"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5046328387"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5046328387"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/dfederm/" data-action="profile" data-tab="" data-username="dfederm" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="344699099" src="./avatar92.jpg" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/dfederm/" data-action="profile" data-tab="" data-username="dfederm" target="_blank" rel="noopener noreferrer">David Federman</a></span> <span class="badge moderator"><span class="badge-content">Mod</span></span><a data-action="follow" data-user="344699099" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5044794109" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Oleksii Nikiforov</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5046328387" data-role="relative-time" class="time-ago" title="Wednesday, August 26, 2020 3:25 PM">4 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>According to the docs, `IHostedService.StartAsync` is "triggered when the application host is ready to start the service", while `IApplicationLifetime.ApplicationStarted` is "triggered when the application host has fully started and is about to wait for a graceful shutdown." The differences are subtle, and I suspect in practice you won't have much of an issue using either one. However, `IHostedService.StartAsync` is called when the host isn't completely started up yet, so I suspect there might be race conditions if your code finishes (and calls `StopApplication`) faster than the host finishing starting up.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5046328387" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2bggbwj" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5046328387"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5047006666"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5047006666"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_KqRhJqkqSv/" data-action="profile" data-tab="" data-username="disqus_KqRhJqkqSv" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>O</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_KqRhJqkqSv/" data-action="profile" data-tab="" data-username="disqus_KqRhJqkqSv" target="_blank" rel="noopener noreferrer">Oleksii Nikiforov</a></span> <a data-action="follow" data-user="333508088" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5046328387" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> David Federman</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5047006666" data-role="relative-time" class="time-ago" title="Thursday, August 27, 2020 2:27 AM">4 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Now I see, thanks.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5047006666" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2bguv9m" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5047006666"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5047006666-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5046328387-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5044794109-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-5263709355"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5263709355"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_FnjZUqcxmG/" data-action="profile" data-tab="" data-username="disqus_FnjZUqcxmG" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="100112558" src="./avatar92(1).jpg" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_FnjZUqcxmG/" data-action="profile" data-tab="" data-username="disqus_FnjZUqcxmG" target="_blank" rel="noopener noreferrer">Chris Walsh</a></span> <a data-action="follow" data-user="100112558" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5263709355" data-role="relative-time" class="time-ago" title="Wednesday, February 10, 2021 6:43 PM">3 years ago</a> <span> <span class="has-edit" data-role="has-edit">edited</span></span></span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Great article.  And nice to stumble across one that is "up to date" rather than lots of examples of "older" versions of .NET Core async/DI/Configuration from the last 5 years. <br>I think I understand what you are saying in your reply to <a data-dsq-mention="disqus_kqrhjqkqsv:disqus" href="https://disqus.com/by/disqus_KqRhJqkqSv/" rel="nofollow noopener" title="https://disqus.com/by/disqus_KqRhJqkqSv/" data-action="profile" data-username="disqus_kqrhjqkqsv" class="mention">Oleksii Nikiforov</a> about using <code>_appLifetime.ApplicationStarted.Register</code> but why wrap the implementation code in an <code>Task.Run(async() =&gt; {})</code>?  Surely the actual program (<code>Task.Delay(1000)</code> or similar) can be awaited on directly within the Register() callback?<br>Thanks.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5263709355" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2f1vk4r" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5263709355"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5288119643"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5288119643"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/dfederm/" data-action="profile" data-tab="" data-username="dfederm" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="344699099" src="./avatar92.jpg" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/dfederm/" data-action="profile" data-tab="" data-username="dfederm" target="_blank" rel="noopener noreferrer">David Federman</a></span> <span class="badge moderator"><span class="badge-content">Mod</span></span><a data-action="follow" data-user="344699099" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5263709355" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Chris Walsh</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5288119643" data-role="relative-time" class="time-ago" title="Monday, March 1, 2021 10:57 PM">3 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>I believe you want to wrap it in a <code>Task.Run</code> since it's in an event callback. Generally you don't want event callbacks to block for a long time (in this case the entire lifetime of the application basically), as events are dispatched sequentially. Imagine if there were multiple registrations to the event.</p><p>To be fair, I didn't test not wrapping it, so they very well may call these in a non-blocking way.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-1" data-action="upvote" title="" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">1</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5288119643" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2fger8b" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5288119643"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5288310812"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5288310812"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_FnjZUqcxmG/" data-action="profile" data-tab="" data-username="disqus_FnjZUqcxmG" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="100112558" src="./avatar92(1).jpg" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_FnjZUqcxmG/" data-action="profile" data-tab="" data-username="disqus_FnjZUqcxmG" target="_blank" rel="noopener noreferrer">Chris Walsh</a></span> <a data-action="follow" data-user="100112558" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5288119643" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> David Federman</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5288310812" data-role="relative-time" class="time-ago" title="Tuesday, March 2, 2021 5:15 AM">3 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Thanks. Hadn't considered that.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5288310812" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2fgiuqk" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5288310812"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5288310812-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-5721101184"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5721101184"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_LbRONCzCHR/" data-action="profile" data-tab="" data-username="disqus_LbRONCzCHR" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="124590669" src="./avatar92(2).jpg" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_LbRONCzCHR/" data-action="profile" data-tab="" data-username="disqus_LbRONCzCHR" target="_blank" rel="noopener noreferrer">vkradio</a></span> <a data-action="follow" data-user="124590669" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5288119643" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> David Federman</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5721101184" data-role="relative-time" class="time-ago" title="Thursday, February 3, 2022 9:14 PM">2 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>But if it is an event, isn't async-await created exactly to not block it, without introducing any additional threads? </p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-1" data-action="upvote" title="" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">1</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5721101184" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2mm71xc" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5721101184"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5721660176"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5721660176"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/dfederm/" data-action="profile" data-tab="" data-username="dfederm" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="344699099" src="./avatar92.jpg" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/dfederm/" data-action="profile" data-tab="" data-username="dfederm" target="_blank" rel="noopener noreferrer">David Federman</a></span> <span class="badge moderator"><span class="badge-content">Mod</span></span><a data-action="follow" data-user="344699099" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5721101184" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> vkradio</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5721660176" data-role="relative-time" class="time-ago" title="Friday, February 4, 2022 11:00 AM">2 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>It's not the same thing as this `Task.Run` is *not* awaited, so it doesn't block at all. Also, keep in mind that we're not in an async context anyway at this point, we're in a synchronous lambda passed to `_appLifetime.ApplicationStarted.Register`.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-1" data-action="upvote" title="" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">1</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5721660176" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2mmj18w" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5721660176"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5721660176-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5721101184-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5288119643-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5263709355-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-5299410010"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5299410010"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_Ktk4rEPCif/" data-action="profile" data-tab="" data-username="disqus_Ktk4rEPCif" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>R</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_Ktk4rEPCif/" data-action="profile" data-tab="" data-username="disqus_Ktk4rEPCif" target="_blank" rel="noopener noreferrer">Rich Ellis</a></span> <a data-action="follow" data-user="269505691" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5299410010" data-role="relative-time" class="time-ago" title="Wednesday, March 10, 2021 10:25 PM">3 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>This was a lifesaver. Could not find much of it in the Microsoft docs.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-4" data-action="upvote" title="" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">4</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5299410010" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2fn4qxm" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5299410010"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5299410010-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-5315399547"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5315399547"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/woutervanranst/" data-action="profile" data-tab="" data-username="woutervanranst" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>W</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/woutervanranst/" data-action="profile" data-tab="" data-username="woutervanranst" target="_blank" rel="noopener noreferrer">Wouter Van Ranst</a></span> <a data-action="follow" data-user="366631126" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5315399547" data-role="relative-time" class="time-ago" title="Wednesday, March 24, 2021 5:56 AM">3 years ago</a> <span> <span class="has-edit" data-role="has-edit">edited</span></span></span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>This is an EXCELLENT post!</p><p>How would you tackle unit testing/integration testing, specifically how to test the components that are generated by the DI? I got the IServiceProvider reference after the run, but (obviously) all the objects are disposed when the application is completed.</p><p>Additionally/FYI in the context for unit testing, the Environment.GetCommandLineArgs() call doesn't work as expected (it returns the arguments that were passed into xUnit) - after a lot of browsing the best practice seems to be to set a custom/short lived environment variable, but that somewhat messes up the cleanliness of the code.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5315399547" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2fwngjf" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5315399547"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5316529925"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5316529925"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/dfederm/" data-action="profile" data-tab="" data-username="dfederm" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="344699099" src="./avatar92.jpg" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/dfederm/" data-action="profile" data-tab="" data-username="dfederm" target="_blank" rel="noopener noreferrer">David Federman</a></span> <span class="badge moderator"><span class="badge-content">Mod</span></span><a data-action="follow" data-user="344699099" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5315399547" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Wouter Van Ranst</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5316529925" data-role="relative-time" class="time-ago" title="Thursday, March 25, 2021 1:19 AM">3 years ago</a> <span> <span class="has-edit" data-role="has-edit">edited</span></span></span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>For testing components which are creating by the DI container, I would just test them "normally". ie just <code>new</code> the object up and provide mock implementations for all dependencies (after all, these are *unit* tests).</p><p>Regarding the command line args, you could create a service like <code>IEnvironment</code> where the implementation uses <code>Environment.GetCommandLineArgs()</code>, Env vars, and whatever other statics which are part of the environment and hard to mock. That way in unit tests you can provide a MockEnvironment. Similarly you see people use this pattern and create an IClock which abstracts <code>DateTime.Now</code>.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5316529925" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2fxboqt" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5316529925"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5316529925-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5315399547-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-5433176005"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5433176005"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_Sf20jH0Mbs/" data-action="profile" data-tab="" data-username="disqus_Sf20jH0Mbs" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="33348778" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_Sf20jH0Mbs/" data-action="profile" data-tab="" data-username="disqus_Sf20jH0Mbs" target="_blank" rel="noopener noreferrer">Glen</a></span> <a data-action="follow" data-user="33348778" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5433176005" data-role="relative-time" class="time-ago" title="Friday, June 25, 2021 3:28 PM">3 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>With this approach, it looks like using Ctrl+C to stop the application does not work.  Here's what the log shows: <br></p><blockquote>info: Microsoft.Hosting.Lifetime[0]<br>      Application is shutting down...</blockquote><p><br>but the application continues.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5433176005" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2hurtfp" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5433176005"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5434300395"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5434300395"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/dfederm/" data-action="profile" data-tab="" data-username="dfederm" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="344699099" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/dfederm/" data-action="profile" data-tab="" data-username="dfederm" target="_blank" rel="noopener noreferrer">David Federman</a></span> <span class="badge moderator"><span class="badge-content">Mod</span></span><a data-action="follow" data-user="344699099" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5433176005" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Glen</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5434300395" data-role="relative-time" class="time-ago" title="Saturday, June 26, 2021 3:43 PM">3 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Do you have a repro to share? It seems to work in the example code I used.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5434300395" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2hvfx0r" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5434300395"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5434300395-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-5606764124"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5606764124"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/the_menace/" data-action="profile" data-tab="" data-username="the_menace" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="13390373" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/the_menace/" data-action="profile" data-tab="" data-username="the_menace" target="_blank" rel="noopener noreferrer">Dennis Rongo</a></span> <a data-action="follow" data-user="13390373" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5433176005" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Glen</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5606764124" data-role="relative-time" class="time-ago" title="Saturday, November 13, 2021 1:18 AM">2 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>My guess is, you're probably in debug mode?</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5606764124" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2kq4evw" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5606764124"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5606764124-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5433176005-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-5433185231"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5433185231"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_Sf20jH0Mbs/" data-action="profile" data-tab="" data-username="disqus_Sf20jH0Mbs" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="33348778" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_Sf20jH0Mbs/" data-action="profile" data-tab="" data-username="disqus_Sf20jH0Mbs" target="_blank" rel="noopener noreferrer">Glen</a></span> <a data-action="follow" data-user="33348778" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5433185231" data-role="relative-time" class="time-ago" title="Friday, June 25, 2021 3:36 PM">3 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Here's another approach: <a href="https://wildermuth.com/2020/08/02/NET-Core-Console-Apps---A-Better-Way" rel="nofollow noopener" title="https://wildermuth.com/2020/08/02/NET-Core-Console-Apps---A-Better-Way">https://wildermuth.com/2020...</a></p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5433185231" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2hus0jz" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5433185231"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5433185231-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-5436348039"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5436348039"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_Sf20jH0Mbs/" data-action="profile" data-tab="" data-username="disqus_Sf20jH0Mbs" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="33348778" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_Sf20jH0Mbs/" data-action="profile" data-tab="" data-username="disqus_Sf20jH0Mbs" target="_blank" rel="noopener noreferrer">Glen</a></span> <a data-action="follow" data-user="33348778" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5436348039" data-role="relative-time" class="time-ago" title="Monday, June 28, 2021 1:05 PM">3 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container" style="height: 374px;"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>This seems to be working for me.</p><p><code><br>using Microsoft.Extensions.Configuration;<br>using Microsoft.Extensions.DependencyInjection;<br>using Microsoft.Extensions.Hosting;<br>using MyApp.MainCode;<br><br>namespace MyApp<br>{<br>  class Program<br>  {<br>    static void Main(string[] args)<br>    {<br>      var host = Host.CreateDefaultBuilder()<br>        .ConfigureAppConfiguration(app =&gt;<br>        {<br>          app.AddJsonFile("appsettings.json");<br>        })<br>        .ConfigureServices(services =&gt;<br>        {<br>          services.AddSingleton(services);<br>          services.AddSingleton&lt;mainapplication&gt;();<br>        })<br>        .Build();<br><br>      var mainApp = host.Services.GetService&lt;mainapplication&gt;();<br>      mainApp.Start();<br>    }<br>  }<br>}<br></code></p><p>and in MainApplication:</p><p><code><br> internal class MainApplication<br>  {<br>    private ILogger&lt;mainapplication&gt; Logger { get; }<br>    public IServiceCollection Services { get; }<br><br>    public MainApplication(ILogger&lt;mainapplication&gt; logger, IServiceCollection services)<br>    {<br>      Logger = logger;<br>      Services = services;<br>    }<br><br>    public void Start()<br>    {<br>        // do whatever<br><br>       Services.AddSingleton&lt;myothercustomcode&gt;();<br><br>       var serviceProvider = Services.BuildServiceProvider();<br>       var myOtherCustomCode = serviceProvider.GetService&lt;myothercustomcode&gt;();<br><br>       myOtherCustomCode.RunRoutine1();<br><br>    }<br>}<br></code></p><p>By adding "services" as a singleton, later, "MyApplication" can inject more services and get them via DI.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5436348039" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2hwnszr" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5436348039"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5436477426"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5436477426"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/dfederm/" data-action="profile" data-tab="" data-username="dfederm" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="344699099" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/dfederm/" data-action="profile" data-tab="" data-username="dfederm" target="_blank" rel="noopener noreferrer">David Federman</a></span> <span class="badge moderator"><span class="badge-content">Mod</span></span><a data-action="follow" data-user="344699099" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5436348039" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Glen</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5436477426" data-role="relative-time" class="time-ago" title="Monday, June 28, 2021 2:44 PM">3 years ago</a> <span> <span class="has-edit" data-role="has-edit">edited</span></span></span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Based on this, seems like you're missing the RunConsoleAsync call which is what sets up the Cyril+C handler. I think that's the issue you were facing?</p><p>I also don't think any of the lifetime events are set up in your case. You're more or less just using the Service collection directly and not actually using the host</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5436477426" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2hwqktu" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5436477426"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5437899042"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5437899042"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_Sf20jH0Mbs/" data-action="profile" data-tab="" data-username="disqus_Sf20jH0Mbs" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="33348778" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_Sf20jH0Mbs/" data-action="profile" data-tab="" data-username="disqus_Sf20jH0Mbs" target="_blank" rel="noopener noreferrer">Glen</a></span> <a data-action="follow" data-user="33348778" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5436477426" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> David Federman</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5437899042" data-role="relative-time" class="time-ago" title="Tuesday, June 29, 2021 3:53 PM">3 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Yes, my goal is to simply have a working console app...  The Main routine is using the host to do configuration and DI.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5437899042" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2hxl1r6" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5437899042"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5437899042-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5436477426-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5436348039-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-5436348747"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5436348747"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_Sf20jH0Mbs/" data-action="profile" data-tab="" data-username="disqus_Sf20jH0Mbs" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="33348778" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_Sf20jH0Mbs/" data-action="profile" data-tab="" data-username="disqus_Sf20jH0Mbs" target="_blank" rel="noopener noreferrer">Glen</a></span> <a data-action="follow" data-user="33348778" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5436348747" data-role="relative-time" class="time-ago" title="Monday, June 28, 2021 1:06 PM">3 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>(Sorry, formatting in Disqus is not very nice.)</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5436348747" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2hwntjf" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5436348747"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5436348747-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-5518491998"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5518491998"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/michael_wasson/" data-action="profile" data-tab="" data-username="michael_wasson" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="91559849" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/michael_wasson/" data-action="profile" data-tab="" data-username="michael_wasson" target="_blank" rel="noopener noreferrer">Michael Wasson</a></span> <a data-action="follow" data-user="91559849" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5518491998" data-role="relative-time" class="time-ago" title="Wednesday, September 1, 2021 5:51 PM">3 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Program.cs Line 17 says to add 3rd Party Loggers but those require info like a Token that you would store in app.config.  Can you get Configuration at that point?  Should ConfigureLogging() be moved below ConfigureServices()?</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5518491998" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2j9kfoe" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5518491998"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5518844783"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5518844783"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/dfederm/" data-action="profile" data-tab="" data-username="dfederm" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="344699099" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/dfederm/" data-action="profile" data-tab="" data-username="dfederm" target="_blank" rel="noopener noreferrer">David Federman</a></span> <span class="badge moderator"><span class="badge-content">Mod</span></span><a data-action="follow" data-user="344699099" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5518491998" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Michael Wasson</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5518844783" data-role="relative-time" class="time-ago" title="Thursday, September 2, 2021 1:08 AM">3 years ago</a> <span> <span class="has-edit" data-role="has-edit">edited</span></span></span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>For NLog, I usually just do something like (apologies for bad formatting):<br><code><br>hostBuilder.ConfigureLogging((hostingContext, loggingBuilder) =&gt;<br>            {<br>                // configure Logging with NLog<br>                loggingBuilder.ClearProviders();<br>                loggingBuilder.AddConfiguration(hostingContext.Configuration.GetSection("Logging"));<br>                loggingBuilder.AddNLog(GetLoggingConfiguration());<br>            });<br></code></p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5518844783" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2j9rzvz" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5518844783"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5518844783-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5518491998-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-5525049807"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5525049807"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/nicolasbarlatier/" data-action="profile" data-tab="" data-username="nicolasbarlatier" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>N</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/nicolasbarlatier/" data-action="profile" data-tab="" data-username="nicolasbarlatier" target="_blank" rel="noopener noreferrer">NB</a></span> <a data-action="follow" data-user="278971148" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5525049807" data-role="relative-time" class="time-ago" title="Tuesday, September 7, 2021 3:41 AM">3 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Thanks David for this very useful post. Why did you need to register the task in startasync to IApplicationLiffetime CancellationToken called applicationstarted? I didn't do this I just called the task directly in background so  StartAsync returns immediately and all works well. Can you explain the difference thanks</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5525049807" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2jdgzpr" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5525049807"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5525828639"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5525828639"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/dfederm/" data-action="profile" data-tab="" data-username="dfederm" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="344699099" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/dfederm/" data-action="profile" data-tab="" data-username="dfederm" target="_blank" rel="noopener noreferrer">David Federman</a></span> <span class="badge moderator"><span class="badge-content">Mod</span></span><a data-action="follow" data-user="344699099" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5525049807" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> NB</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5525828639" data-role="relative-time" class="time-ago" title="Tuesday, September 7, 2021 5:04 PM">3 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>The differences are subtle but approximately the same. In my example, the actual "service" startup (your logic) happens once the application is started, ie after any internal stuff the generic host does. If you kick off that logic in a task immediately, then the generic host's application startup happens concurrently with your logic, so the application isn't "started" yet (from the host's perspective). I can't think of any specific issues your approach would cause, but my example follows the application lifetime events of the host.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5525828639" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2jdxonz" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5525828639"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5526279419"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5526279419"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/nicolasbarlatier/" data-action="profile" data-tab="" data-username="nicolasbarlatier" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>N</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/nicolasbarlatier/" data-action="profile" data-tab="" data-username="nicolasbarlatier" target="_blank" rel="noopener noreferrer">NB</a></span> <a data-action="follow" data-user="278971148" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5525828639" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> David Federman</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5526279419" data-role="relative-time" class="time-ago" title="Wednesday, September 8, 2021 3:26 AM">3 years ago</a> <span> <span class="has-edit" data-role="has-edit">edited</span></span></span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container" style="height: 374px;"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Thanks David for your explanation which could be included to explain the code content :)</p><p>Do you have links showing samples where application lifetime events are handled from IHostedService</p><p>I found this one for example<br><a href="https://voidnish.wordpress.com/2018/07/21/handling-application-lifetime-events-for-a-hosted-service/" rel="nofollow noopener" title="https://voidnish.wordpress.com/2018/07/21/handling-application-lifetime-events-for-a-hosted-service/">https://voidnish.wordpress.com/2018/07/21/handling-application-lifetime-events-for-a-hosted-service/</a></p><p>Here what I did, in my case I needed to close down the application once the process is done so _hosttApplicationLifeTime.StopApplication(); is called</p><p><code><br>public Task StartAsync(CancellationToken cancellationToken)<br>        {<br>            try<br>            {<br><br>                Task.Run(async () =&gt;<br>                {<br>                    try<br>                    {<br>                        await ProcessAsync(cancellationToken);<br><br>                    }<br>                    catch (Exception ex)<br>                    {<br>                        _logger.LogError(ex, "Unhandled exception!");<br>                    }<br>                    finally<br>                    {<br>                        //--&gt; ask for the application to close down<br>                        _hosttApplicationLifeTime.StopApplication();<br>                    }<br>                });<br><br><br>                return Task.CompletedTask;<br>            }<br>            catch (Exception)<br>            {<br><br>                throw;<br>            }<br><br>        }<br></code></p><p>You are from Seattle ? I watch Frasier lately ;)</p><p>Cheers</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5526279419" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2je7chn" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5526279419"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5526279419-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5525828639-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5525049807-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-5572329790"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5572329790"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/jeanfrancoiscloutier/" data-action="profile" data-tab="" data-username="jeanfrancoiscloutier" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>J</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/jeanfrancoiscloutier/" data-action="profile" data-tab="" data-username="jeanfrancoiscloutier" target="_blank" rel="noopener noreferrer">Jean-Francois Cloutier</a></span> <a data-action="follow" data-user="293671840" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5572329790" data-role="relative-time" class="time-ago" title="Friday, October 15, 2021 2:22 PM">3 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Thanks David. This was so helpful !!!</p><p>I cannot comprehend that Microsoft does not have an example as clear as this. If they do, it is well buried on their site and it should be promoted as one of their top documentation.</p><p>In any case (and with all due respect), I think you have one small bug in your app. You should store the Task object returned by Task.Run when you register your application and await that task in StopAsync.</p><p>At least, in my case, I was getting a problem on shutdown about the CancellationToken. I figured it had to do with my background task and as soon as I started awaiting for that Task obejct, my application was now shutting down perfectly and cleanly.</p><p>Let me know if this makes sense. It is also possible that there is a subtle detail that I missed from your example.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5572329790" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2k5md6m" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5572329790"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5653711278"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5653711278"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/dfederm/" data-action="profile" data-tab="" data-username="dfederm" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="344699099" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/dfederm/" data-action="profile" data-tab="" data-username="dfederm" target="_blank" rel="noopener noreferrer">David Federman</a></span> <span class="badge moderator"><span class="badge-content">Mod</span></span><a data-action="follow" data-user="344699099" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5572329790" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Jean-Francois Cloutier</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5653711278" data-role="relative-time" class="time-ago" title="Tuesday, December 21, 2021 12:04 PM">2 years ago</a> <span> <span class="has-edit" data-role="has-edit">edited</span></span></span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>I know this is a super late reply, but I think you're right. I'll correct the code in the GitHub repo.</p><p>It's actually a little more involved and requires you to maintain your own cancellation token source to cancel your application logic properly.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5653711278" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2li2nji" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5653711278"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5924181224"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5924181224"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_mNBXR6Bjtz/" data-action="profile" data-tab="" data-username="disqus_mNBXR6Bjtz" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>D</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_mNBXR6Bjtz/" data-action="profile" data-tab="" data-username="disqus_mNBXR6Bjtz" target="_blank" rel="noopener noreferrer">Dave Jones</a></span> <a data-action="follow" data-user="383906031" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5653711278" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> David Federman</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5924181224" data-role="relative-time" class="time-ago" title="Thursday, July 21, 2022 5:42 AM">2 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>I have been experimenting with this and the Github code does not seem to work where a 2nd hosted service is included. I'm getting a TaskCanceledException. It is always thrown by the slower service (experimented with Task.Delay).</p><p>However, if you do not call cancellationTokenSource.Cancel(), it all works as expected. Cancelling in the ApplicationStopping event causes the problem.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5924181224" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2pz3rhk" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5924181224"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5924829219"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5924829219"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_AEOCNc6J5w/" data-action="profile" data-tab="" data-username="disqus_AEOCNc6J5w" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>S</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_AEOCNc6J5w/" data-action="profile" data-tab="" data-username="disqus_AEOCNc6J5w" target="_blank" rel="noopener noreferrer">Some Coder</a></span> <a data-action="follow" data-user="384477820" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5924181224" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Dave Jones</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5924829219" data-role="relative-time" class="time-ago" title="Thursday, July 21, 2022 5:54 PM">2 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Pretty sure this happens because Task.Delay throws an exception when a Task is cancelled. The code is prevaricated on the notion that the async operation you call does NOT throw an exception. If it does, your would need to change the code to handle that (I think).</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5924829219" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2pzhnhf" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5924829219"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5924963263"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5924963263"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_mNBXR6Bjtz/" data-action="profile" data-tab="" data-username="disqus_mNBXR6Bjtz" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>D</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_mNBXR6Bjtz/" data-action="profile" data-tab="" data-username="disqus_mNBXR6Bjtz" target="_blank" rel="noopener noreferrer">Dave Jones</a></span> <a data-action="follow" data-user="383906031" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5924829219" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Some Coder</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5924963263" data-role="relative-time" class="time-ago" title="Thursday, July 21, 2022 9:10 PM">2 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>I tested your theory and it still does not work. So, I replaced my call to Task.Delay with a service that checks for cancelation and returns without an exception. It does not work. There does not seem to be a way of signalling cancelation from one hosted service to another. The linked CancellationTokenSource may do that within one hosted service, but it does not achieve it across two hosted services. <br>Something is missing here.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-1" data-action="upvote" title="" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">1</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5924963263" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2pzkiwv" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5924963263"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5924963263-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5924829219-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5924181224-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5653711278-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-6304700644"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="6304700644"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/bobvale/" data-action="profile" data-tab="" data-username="bobvale" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="54313832" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/bobvale/" data-action="profile" data-tab="" data-username="bobvale" target="_blank" rel="noopener noreferrer">Bob</a></span> </span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5572329790" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Jean-Francois Cloutier</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-6304700644" data-role="relative-time" class="time-ago" title="Friday, October 20, 2023 10:19 AM">6 months ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>You could add to your try catch  so you catch and swallow the cancelled exception before you unhandled exception.</p><p>so</p><p>catch when (applicationLifeTime.ApplicationStopping.IsCancellationRequested) {<br>  // ignore the error<br>} catch (Exception ex) {<br>...</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-6304700644" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2w9nm5g" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:6304700644"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-6304700644-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5572329790-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-5729789487"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5729789487"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/eduardogarciaprieto/" data-action="profile" data-tab="" data-username="eduardogarciaprieto" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>E</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/eduardogarciaprieto/" data-action="profile" data-tab="" data-username="eduardogarciaprieto" target="_blank" rel="noopener noreferrer">Eduardo Garcia-Prieto</a></span> <a data-action="follow" data-user="99210343" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5729789487" data-role="relative-time" class="time-ago" title="Thursday, February 10, 2022 11:12 PM">2 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Hi David,</p><p>Great post!</p><p>I took the liberty of forking your GitHub repo and added some extra features that I plan on using in future console apps.</p><p>I would love any feedback from you (or anyone on here). :)</p><p><a href="https://github.com/egarcia74/GenericHostConsoleApp" rel="nofollow noopener" title="https://github.com/egarcia74/GenericHostConsoleApp">egarcia74/GenericHostConsoleApp</a></p><p>* Separating the main application logic from the boilerplate startup code. There is now a separate MainService class, which can be easily modified to implement custom logic without having to worry about all the application plumbing required to wire up the application hosted service.</p><p>* Moved classes into subdirectories corresponding to the class' area of concern. E.g. Configuration, Services, Interfaces.</p><p>* Using an ExitCode enum to define return values.</p><p>* Compile-time logging source generation .</p><p>* Validation of configuration options .</p><p>* Serilog as the logging provider.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5729789487" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2mrd9v3" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5729789487"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5925051107"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5925051107"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_mNBXR6Bjtz/" data-action="profile" data-tab="" data-username="disqus_mNBXR6Bjtz" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>D</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_mNBXR6Bjtz/" data-action="profile" data-tab="" data-username="disqus_mNBXR6Bjtz" target="_blank" rel="noopener noreferrer">Dave Jones</a></span> <a data-action="follow" data-user="383906031" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5729789487" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Eduardo Garcia-Prieto</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5925051107" data-role="relative-time" class="time-ago" title="Thursday, July 21, 2022 11:28 PM">2 years ago</a> <span> <span class="has-edit" data-role="has-edit">edited</span></span></span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Some great code in there. But there is a problem. If you add a second service, you will sometimes get a TaskCanceledException. I cloned your repo, duplicated your <b>ApplicationHostedService</b> (named it something else) and on my first run I got that exception. Been getting that exception in my experiments with this as well. I think there's something wrong with the token handling in the code.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5925051107" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2pzmeoz" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5925051107"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5925059488"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5925059488"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/dfederm/" data-action="profile" data-tab="" data-username="dfederm" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="344699099" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/dfederm/" data-action="profile" data-tab="" data-username="dfederm" target="_blank" rel="noopener noreferrer">David Federman</a></span> <span class="badge moderator"><span class="badge-content">Mod</span></span><a data-action="follow" data-user="344699099" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5925051107" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Dave Jones</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5925059488" data-role="relative-time" class="time-ago" title="Thursday, July 21, 2022 11:45 PM">2 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Can you share a repro?</p><p>I suspect it's related to the StopApplication call in the finally block. When that service is done it would tear down the entire application. Multiple services would need to coordinate on that.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-3" data-action="upvote" title="" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">3</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5925059488" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2pzml5s" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5925059488"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5925065050"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5925065050"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/eduardogarciaprieto/" data-action="profile" data-tab="" data-username="eduardogarciaprieto" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>E</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/eduardogarciaprieto/" data-action="profile" data-tab="" data-username="eduardogarciaprieto" target="_blank" rel="noopener noreferrer">Eduardo Garcia-Prieto</a></span> <a data-action="follow" data-user="99210343" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5925059488" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> David Federman</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5925065050" data-role="relative-time" class="time-ago" title="Thursday, July 21, 2022 11:57 PM">2 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>I think that's correct. The ApplicationHostedService will tear down the process after the MainService.Main method completes.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-1" data-action="upvote" title="" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">1</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5925065050" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2pzmpga" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5925065050"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5925065050-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-5925139256"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5925139256"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_mNBXR6Bjtz/" data-action="profile" data-tab="" data-username="disqus_mNBXR6Bjtz" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>D</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_mNBXR6Bjtz/" data-action="profile" data-tab="" data-username="disqus_mNBXR6Bjtz" target="_blank" rel="noopener noreferrer">Dave Jones</a></span> <a data-action="follow" data-user="383906031" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5925059488" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> David Federman</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5925139256" data-role="relative-time" class="time-ago" title="Friday, July 22, 2022 2:54 AM">2 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>I believe that is exactly right. I'll put together a sample when I get back to a PC. Not sure how to stop the host other than StopApplication and the HostApplicationLifetime abstraction does not really help, despite being a singleton.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5925139256" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2pzoapk" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5925139256"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5925139256-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-5925963701"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5925963701"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_mNBXR6Bjtz/" data-action="profile" data-tab="" data-username="disqus_mNBXR6Bjtz" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>D</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_mNBXR6Bjtz/" data-action="profile" data-tab="" data-username="disqus_mNBXR6Bjtz" target="_blank" rel="noopener noreferrer">Dave Jones</a></span> <a data-action="follow" data-user="383906031" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5925059488" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> David Federman</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5925963701" data-role="relative-time" class="time-ago" title="Friday, July 22, 2022 9:32 PM">2 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>I have forked your repo and added a 2nd service. That <a href="https://github.com/davejonescodes/GenericHostConsoleApp.git" rel="nofollow noopener" title="https://github.com/davejonescodes/GenericHostConsoleApp.git">fork is here</a>. I've put a small delay in the "Other" service to demonstrate. The only solution I can think of, in the absence of some kind of tricky orchestration, is to ensure that the slowest service calls StopApplication. But it will have to be ensured to be the slowest and is not really an optimum solution. The thing I don't get is that when you call IsCancellationRequested in the other service, it returns false! I guess that can't be updated across hosted services, despite the linked token source. Cheers.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5925963701" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2q05yut" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5925963701"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5925963701-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5925059488-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5925051107-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5729789487-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-5915315953"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5915315953"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_AEOCNc6J5w/" data-action="profile" data-tab="" data-username="disqus_AEOCNc6J5w" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>S</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_AEOCNc6J5w/" data-action="profile" data-tab="" data-username="disqus_AEOCNc6J5w" target="_blank" rel="noopener noreferrer">Some Coder</a></span> <a data-action="follow" data-user="384477820" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5915315953" data-role="relative-time" class="time-ago" title="Tuesday, July 12, 2022 6:34 PM">2 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>There's some stuff here which is really hard to follow. I'll start with a simple question.<br>Why is StartAsync (ostensibly an async method) run synchronously?</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5915315953" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2pttr01" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5915315953"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5915330154"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5915330154"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/dfederm/" data-action="profile" data-tab="" data-username="dfederm" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="344699099" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/dfederm/" data-action="profile" data-tab="" data-username="dfederm" target="_blank" rel="noopener noreferrer">David Federman</a></span> <span class="badge moderator"><span class="badge-content">Mod</span></span><a data-action="follow" data-user="344699099" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5915315953" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Some Coder</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5915330154" data-role="relative-time" class="time-ago" title="Tuesday, July 12, 2022 6:53 PM">2 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>`StartAsync` needs to return for the application to actually finish "starting". It's async to allow some async initialization, but if you put the entire application's logic in `StartAsync`, then it'll always be "starting" and never "started".</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-1" data-action="upvote" title="" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">1</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5915330154" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2ptu1yi" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5915330154"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5915442152"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5915442152"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_AEOCNc6J5w/" data-action="profile" data-tab="" data-username="disqus_AEOCNc6J5w" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>S</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_AEOCNc6J5w/" data-action="profile" data-tab="" data-username="disqus_AEOCNc6J5w" target="_blank" rel="noopener noreferrer">Some Coder</a></span> <a data-action="follow" data-user="384477820" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5915330154" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> David Federman</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5915442152" data-role="relative-time" class="time-ago" title="Tuesday, July 12, 2022 9:33 PM">2 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>OK. I think I understand that. It'll return quickly if it is synchronous and you can use Task.Run to kick off the application logic (in the registered callback of the _applicationLifetime). Thank you.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5915442152" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2ptwgdk" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5915442152"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5915442152-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5915330154-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5915315953-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-5993822737"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5993822737"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/michaelvonfleisch/" data-action="profile" data-tab="" data-username="michaelvonfleisch" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>M</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/michaelvonfleisch/" data-action="profile" data-tab="" data-username="michaelvonfleisch" target="_blank" rel="noopener noreferrer">Michael von Fleisch</a></span> <a data-action="follow" data-user="388078082" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5993822737" data-role="relative-time" class="time-ago" title="Friday, September 23, 2022 6:08 AM">2 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Hi, I found your blog trough a intensive google search.</p><p>Following Problem:<br>I am an experienced .net-Framework dev and have my issues understanding the new service Architecture.</p><p>I usually builded my services in company that I can start them as .Console-App for debugging purpose but being able to be installed as service</p><p>Just like this mini garbage project of mine <a href="https://bitbucket.org/da-legendary-Michi/legendary_repository/src/master/PriorityForcer/" rel="nofollow noopener" title="https://bitbucket.org/da-legendary-Michi/legendary_repository/src/master/PriorityForcer/">https://bitbucket.org/da-le...</a></p><p>If I understand your article rights its to build an .exe which hosts a service, (maybe I understand it wrong) which hosts a service.</p><p>Do you have an Idea how I can write like in good old times an App which can work as Console-App or/and as service with same codebase and same deployment?</p><p>Best Regards,<br>Michael Fleischer</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5993822737" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2r4kf81" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5993822737"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5994839986"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5994839986"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/dfederm/" data-action="profile" data-tab="" data-username="dfederm" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="344699099" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/dfederm/" data-action="profile" data-tab="" data-username="dfederm" target="_blank" rel="noopener noreferrer">David Federman</a></span> <span class="badge moderator"><span class="badge-content">Mod</span></span><a data-action="follow" data-user="344699099" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5993822737" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Michael von Fleisch</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5994839986" data-role="relative-time" class="time-ago" title="Saturday, September 24, 2022 10:32 AM">2 years ago</a> <span> <span class="has-edit" data-role="has-edit">edited</span></span></span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>You may be interested in .NET Worker Services: <a href="https://learn.microsoft.com/en-us/dotnet/core/extensions/workers" rel="nofollow noopener" title="https://learn.microsoft.com/en-us/dotnet/core/extensions/workers">https://learn.microsoft.com...</a></p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5994839986" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2r5684y" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5994839986"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5995569277"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5995569277"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/michaelvonfleisch/" data-action="profile" data-tab="" data-username="michaelvonfleisch" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>M</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/michaelvonfleisch/" data-action="profile" data-tab="" data-username="michaelvonfleisch" target="_blank" rel="noopener noreferrer">Michael von Fleisch</a></span> <a data-action="follow" data-user="388078082" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5994839986" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> David Federman</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-5995569277" data-role="relative-time" class="time-ago" title="Sunday, September 25, 2022 10:25 AM">2 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>thanks for the answer, so just replace the .net framework start stop thing with that and I will still be able to install software as console app/or and as service?</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5995569277" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2r5luv1" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5995569277"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5995569277-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5994839986-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5993822737-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-6124931568"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="6124931568"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span></span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/rodinlive/" data-action="profile" data-tab="" data-username="rodinlive" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="392495971" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/rodinlive/" data-action="profile" data-tab="" data-username="rodinlive" target="_blank" rel="noopener noreferrer">Andrey Rodin</a></span> <a data-action="follow" data-user="392495971" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://dfederm.com/building-a-console-app-with-.net-generic-host/#comment-6124931568" data-role="relative-time" class="time-ago" title="Sunday, February 26, 2023 4:35 PM">a year ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>What if I need to run everything from Generic Host in the background (services which are used elsewhere in my solution), but I need a separate console app which accepts console input. In other words I would like a normal console application with user input/app output which have access to all services in Generic Host?</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-6124931568" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share </span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2tamjg0" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:6124931568"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-6124931568-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="load-more-refresh load-more-refresh--v2" data-role="more" style="display: none;"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" data-action="more-posts" class="btn load-more-refresh__button ">Load more comments</a></div></div></section><div id="placement-bottom" data-tracking-area="discovery-south"></div><footer id="footer" data-tracking-area="footer" class="disqus-footer__wrapper disqus-footer__wrapper--refresh"><div><div class="disqus-footer disqus-footer--refresh"><ul class="disqus-footer__list"><li id="thread-subscribe-button" class="email disqus-footer__item disqus-footer__item--refresh"><div class="default"><a href="https://disqus.com/embed/comments/?base=default&amp;f=dfederm&amp;t_i=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_u=https%3A%2F%2Fdfederm.com%2Fbuilding-a-console-app-with-.net-generic-host%2F&amp;t_d=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;t_t=Building%20a%20Console%20App%20with%20.NET%20Generic%20Host&amp;s_o=default#" rel="nofollow" data-action="subscribe" title="Subscribe and get email updates from this discussion" class="disqus-footer__link disqus-footer__link--refresh"><div class="icon-wrapper"><i aria-hidden="true" class="icon-subscribe-refresh"></i></div><i aria-hidden="true" class="icon icon-checkmark"></i><span id="thread-subscribe-text-default" class="text-item">Subscribe</span><span id="thread-subscribe-text-subscribed" class="text-item hidden">Subscribed</span></a></div></li><li class="privacy disqus-footer__item disqus-footer__item--refresh"><a href="https://disqus.com/privacy-policy" rel="nofollow noopener noreferrer" target="_blank" class="disqus-footer__link disqus-footer__link--refresh" title="Privacy"><div class="icon-wrapper"><i aria-hidden="true" class="icon-privacy-refresh"></i></div><span class="text-item">Privacy</span></a></li><li class="do-not-sell disqus-footer__item disqus-footer__item--refresh"><a href="https://disqus.com/data-sharing-settings/" rel="nofollow noopener noreferrer" target="_blank" class="disqus-footer__link disqus-footer__link--refresh"><div class="icon-wrapper"><i aria-hidden="true" class="icon-warning-refresh"></i></div><span class="text-item">Do Not Sell My Data</span></a></li></ul><span class="disqus-footer__logo"><a href="https://disqus.com/" rel="nofollow" title="Powered by Disqus" class="disqus-footer__link disqus-footer__link--refresh">Powered by Disqus</a></span></div></div></footer></div></div></div><div id="embed_v2-root"></div></div><div id="fb-root" class=" fb_reset"><div style="position: absolute; top: -10000px; width: 0px; height: 0px;"><div></div></div></div><iframe id="ssIFrame_google" sandbox="allow-scripts allow-same-origin allow-storage-access-by-user-activation" allow="identity-credentials-get" aria-hidden="true" frame-border="0" style="position: absolute; width: 1px; height: 1px; inset: -9999px; display: none;" src="./iframe.html"></iframe></body></html>